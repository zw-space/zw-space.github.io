<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    
    
    <entry>
      <title>Hexo(Matery)自定义(四)：禁止搜索加密/隐藏文章内容</title>
      <link href="/article/38293/"/>
      <url>/article/38293/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li><p>我是用的搜索插件是：<code>hexo-generator-search</code></p></li><li><p>想法：一开始也没想到会发生这种事，我在为文章加密时会习惯性把密码写在内容顶部，今天试下搜索功能，结果直接把我密码显示出来了，已经加密或者已经隐藏的文章，还能在搜索中显示，这样的话只要查看<code>search.xml</code>文件，那文章加密和隐藏就完全失去作用</p></li></ul><h2 id="更改模板"><a href="#更改模板" class="headerlink" title="更改模板"></a>更改模板</h2><p>直接打开网站根目录下的 <code>node_modules/hexo-generator-search/templates/search.xml</code> 文件，更改内容为：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>search</span><span class="token punctuation">&gt;</span></span>   {% if posts %}  {% for post in posts.toArray() %}    {% if post.indexing == undefined or post.indexing %}    {% if post.hide != true %}    {% if not (post.password and post.password.length &gt; 0) %}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>{{ post.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ (url + post.path) | uriencode }}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>{{ (url + post.path) | uriencode }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>      {% if content %}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>content</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>html<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[{{ post.content | noControlChars | safe }}]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>content</span><span class="token punctuation">&gt;</span></span>      {% endif %}      {% if post.categories and post.categories.length&gt;0 %}      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>categories</span><span class="token punctuation">&gt;</span></span>          {% for cate in post.categories.toArray() %}          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span><span class="token punctuation">&gt;</span></span> {{ cate.name }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>category</span><span class="token punctuation">&gt;</span></span>          {% endfor %}      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>categories</span><span class="token punctuation">&gt;</span></span>      {% endif %}      {% if post.tags and post.tags.length&gt;0 %}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tags</span><span class="token punctuation">&gt;</span></span>            {% for tag in post.tags.toArray() %}            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tag</span><span class="token punctuation">&gt;</span></span> {{ tag.name }} <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tag</span><span class="token punctuation">&gt;</span></span>            {% endfor %}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tags</span><span class="token punctuation">&gt;</span></span>      {% endif %}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>    {% endif %}    {% endif %}    {% endif %}  {% endfor %}  {% endif %}  {% if pages %}    {% for page in pages.toArray() %}    {% if post.indexing == undefined or post.indexing %}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>entry</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>{{ page.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{{ (url + page.path) | uriencode }}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>{{ (url + page.path) | uriencode }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>      {% if content %}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>content</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>html<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token cdata">&lt;![CDATA[{{ page.content | noControlChars | safe }}]]&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>content</span><span class="token punctuation">&gt;</span></span>      {% endif %}    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>entry</span><span class="token punctuation">&gt;</span></span>    {% endif %}    {% endfor %}  {% endif %}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>search</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>然后重新生成文件，发现<code>search.xml</code>文件中已经没有加密和隐藏文章了，Over！</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Matery </tag>
            
            <tag> 文章搜索 </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>Hexo(Matery)自定义(三)：增加文章页面</title>
      <link href="/article/24877/"/>
      <url>/article/24877/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li><p>本文与上一篇原理差不多：<a href="http://wzspace.cn/article/41278/">Hexo自定义(二)：增加文章统计</a></p></li><li><p>页面预览：<a href="/article/">点我</a></p></li><li><p>想法：自已的文章永久链接格式为：<code>article/:id/</code>，不想在删除id后访问出现<code>404</code>页面</p></li></ul><h2 id="新建文章页面"><a href="#新建文章页面" class="headerlink" title="新建文章页面"></a>新建文章页面</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page article<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后在文件内容的双线内添加：</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">type: articlelayout: article<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="新建文章页面模板文件"><a href="#新建文章页面模板文件" class="headerlink" title="新建文章页面模板文件"></a>新建文章页面模板文件</h2><p>在主题目录的<code>layout/</code>文件夹下新建<code>article.ejs</code>模板文件，然后写入以下内容：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs">&lt;%- partial('_partial/bg-cover') %&gt;&lt;main class="content"&gt;    &lt;% if (theme.postCalendar) { %&gt;    &lt;%- partial('_widget/post-calendar') %&gt;    &lt;% } %&gt;    &lt;%    /**     * hashCode function.     *     * @param str str     * @returns {number}     */    var hashCode = function (str) {        if (!str &amp;&amp; str.length === 0) {            return 0;        }        var hash = 0;        for (var i = 0, len = str.length; i &lt; len; i++) {            hash = ((hash &lt;&lt; 5) - hash) + str.charCodeAt(i);            hash |= 0;        }        return hash;    };    // init year and month variable.    var year = '1970';    var month = '1970-01';    // post feature image.    var featureimg = '/medias/featureimages/0.jpg';    var featureImages = theme.featureImages;    %&gt;    &lt;div id="cd-timeline" class="container"&gt;        &lt;% page.posts.each(function(post) { %&gt;        &lt;div class="cd-timeline-block"&gt;            &lt;%# year. %&gt;            &lt;% if (date(post.date, 'YYYY') != year) { %&gt;            &lt;% year = date(post.date, 'YYYY'); %&gt;            &lt;div class="cd-timeline-img year" data-aos="zoom-in-up"&gt;                &lt;a href="&lt;%- url_for('/archives/' + year) %&gt;"&gt;&lt;%- year %&gt;&lt;/a&gt;            &lt;/div&gt;            &lt;% } %&gt;            &lt;%# month. %&gt;            &lt;% if (date(post.date, 'YYYY-MM') != month) { %&gt;            &lt;%                month = date(post.date, 'YYYY-MM');                var m = date(post.date, 'MM')            %&gt;            &lt;div class="cd-timeline-img month" data-aos="zoom-in-up"&gt;                &lt;a href="&lt;%- url_for('/archives/' + year + '/' + m) %&gt;"&gt;&lt;%- m %&gt;&lt;/a&gt;            &lt;/div&gt;            &lt;% } %&gt;            &lt;%# every day posts. %&gt;            &lt;div class="cd-timeline-img day" data-aos="zoom-in-up"&gt;                &lt;span&gt;&lt;%- date(post.date, 'YYYY-MM-DD').substring(8, 10) %&gt;&lt;/span&gt;            &lt;/div&gt;            &lt;article class="cd-timeline-content" data-aos="fade-up"&gt;                &lt;div class="article col s12 m6"&gt;                    &lt;div class="card"&gt;                        &lt;a href="&lt;%- url_for(post.path) %&gt;"&gt;                            &lt;div class="card-image"&gt;                                &lt;% if (post.img) { %&gt;                                &lt;img src="&lt;%- url_for(post.img) %&gt;" class="responsive-img" alt="&lt;%= post.title %&gt;"&gt;                                &lt;% } else { %&gt;                                &lt;%                                    featureimg = featureImages[Math.abs(hashCode(post.title) % featureImages.length)];                                %&gt;                                &lt;img src="&lt;%- theme.jsDelivr.url %&gt;&lt;%- url_for(featureimg) %&gt;" class="responsive-img" alt="&lt;%= post.title %&gt;"&gt;                                &lt;% } %&gt;                                &lt;span class="card-title"&gt;&lt;%= post.title %&gt;&lt;/span&gt;                            &lt;/div&gt;                        &lt;/a&gt;                        &lt;div class="card-content article-content"&gt;                            &lt;div class="summary block-with-text"&gt;                                &lt;% if (post.summary &amp;&amp; post.summary.length &gt; 0) { %&gt;                                    &lt;%- post.summary %&gt;                                &lt;% } else { %&gt;                                    &lt;%- strip_html(post.content).substring(0, 120) %&gt;                                &lt;% } %&gt;                            &lt;/div&gt;                            &lt;div class="publish-info"&gt;                                &lt;span class="publish-date"&gt;                                    &lt;i class="far fa-clock fa-fw icon-date"&gt;&lt;/i&gt;&lt;%= date(post.date, config.date_format) %&gt;                                &lt;/span&gt;                                &lt;span class="publish-author"&gt;                                    &lt;% if (post.categories &amp;&amp; post.categories.length &gt; 0) { %&gt;                                    &lt;i class="fas fa-bookmark fa-fw icon-category"&gt;&lt;/i&gt;                                    &lt;% post.categories.forEach(category =&gt; { %&gt;                                    &lt;a href="&lt;%- url_for(category.path) %&gt;" class="post-category"&gt;                                    &lt;%- category.name %&gt;                                    &lt;/a&gt;                                    &lt;% }); %&gt;                                    &lt;% } else if (post.author &amp;&amp; post.author.length &gt; 0) { %&gt;                                    &lt;i class="fas fa-user fa-fw"&gt;&lt;/i&gt;                                    &lt;%- post.author %&gt;                                    &lt;% } else { %&gt;                                    &lt;i class="fas fa-user fa-fw"&gt;&lt;/i&gt;                                    &lt;%- config.author %&gt;                                    &lt;% } %&gt;                                &lt;/span&gt;                            &lt;/div&gt;                        &lt;/div&gt;                        &lt;% if (post.tags &amp;&amp; post.tags.length) { %&gt;                        &lt;div class="card-action article-tags"&gt;                            &lt;% post.tags.forEach(tag =&gt; { %&gt;                            &lt;a href="&lt;%- url_for(tag.path) %&gt;"&gt;&lt;span class="chip bg-color"&gt;&lt;%= tag.name %&gt;&lt;/span&gt;&lt;/a&gt;                            &lt;% }); %&gt;                        &lt;/div&gt;                        &lt;% } %&gt;                    &lt;/div&gt;                &lt;/div&gt;            &lt;/article&gt;        &lt;/div&gt;        &lt;% }); %&gt;    &lt;/div&gt;&lt;/main&gt;&lt;% if (page.total &gt; 1) { %&gt;&lt;%- partial('_partial/paging') %&gt;&lt;% } %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个<code>ejs</code>文件是由<code>index.ejs</code>修改而来</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>在主题配置文件中添加：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"># 文章article:  title: 我的文章  # 标题  icon: fa-solid fa-signs-post  # 图标  text: 我相信我所做的一切都有他的意义。  # 一言<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>添加菜单导航，生成静态文件即可</p></blockquote><h2 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h2><ul><li><code>index.ejs</code>中复制的函数，用于在文章没有指定特色图片时根据标题hash值从目录<code>source/medias/featureimages/</code>中获取图片</li></ul><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs">/*** hashCode function.** @param str str* @returns {number}*/var hashCode = function (str) {    if (!str &amp;&amp; str.length === 0) {        return 0;    }    var hash = 0;    for (var i = 0, len = str.length; i &lt; len; i++) {        hash = ((hash &lt;&lt; 5) - hash) + str.charCodeAt(i);        hash |= 0;    }    return hash;};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>其他部分和上一篇文章差不多，如有兴趣，<a href="http://wzspace.cn/article/41278/">空间门</a>。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Matery </tag>
            
            <tag> 文章页面 </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>Hexo(Matery)自定义(二)：增加文章统计</title>
      <link href="/article/41278/"/>
      <url>/article/41278/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li><p>页面预览：<a href="/stat/">点我</a></p></li><li><p>想法：偶然看到，甚是喜欢，但奈何原博主没有分享资源</p></li></ul><h2 id="新建统计页面"><a href="#新建统计页面" class="headerlink" title="新建统计页面"></a>新建统计页面</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page stat<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后在文件内容的双线内添加：</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">type: statlayout: stat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="新建统计页面模板文件"><a href="#新建统计页面模板文件" class="headerlink" title="新建统计页面模板文件"></a>新建统计页面模板文件</h2><p>在主题目录的<code>layout/</code>文件夹下新建<code>stat.ejs</code>模板文件，然后用<code>vim</code>也好，用其他工具也好，写入以下内容：</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs">&lt;style type="text/css"&gt;    /* don't remove. */    .about-cover {        height: 75vh;    }&lt;/style&gt;&lt;%- partial('_partial/bg-cover') %&gt;&lt;main class="content"&gt;    &lt;div class="container chip-container"&gt;        &lt;div class="card"&gt;            &lt;div class="card-content"&gt;                &lt;div class="tag-title center-align"&gt;                    &lt;i class="&lt;%= theme.stat.icon %&gt;"&gt;&lt;/i&gt;&amp;nbsp;&amp;nbsp;&lt;%= theme.stat.title %&gt;                &lt;/div&gt;            &lt;/div&gt;        &lt;/div&gt;        &lt;div class="card"&gt;            &lt;div class="card-content"&gt;                &lt;% if (theme.stat.text) { %&gt;                &lt;style&gt;                    #stat-text {                        -webkit-text-size-adjust: 100%;                        line-height: 1.5;                        font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;                        font-weight: normal;                        --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";                        --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";                        --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";                        color: #34495e;                        text-align: center;                        float: left;                        box-sizing: border-box;                        padding: 0 .75rem;                        min-height: 1px;                        opacity: .6;                        font-size: 1.1rem;                        width: 83.3333333333%;                        left: auto;                        right: auto;                        margin-left: 8.3333333333%;                    }                &lt;/style&gt;                &lt;div id="stat-text"&gt;                    &lt;div class="row"&gt;                        &lt;div class="col l8 offset-l2 m10 offset-m1 s10 offset-s1 center-align text"&gt;                            &lt;%= theme.stat.text %&gt;                        &lt;/div&gt;                    &lt;/div&gt;                &lt;/div&gt;                &lt;br&gt;                &lt;hr&gt;                &lt;% } %&gt;                &lt;%- page.content %&gt;                &lt;% if (theme.stat.show_post) { %&gt;                &lt;h1 id="&lt;%= theme.stat.title %&gt;"&gt;&lt;a href="#&lt;%= theme.stat.title %&gt;" class="headerlink" title="&lt;%= theme.stat.title %&gt;"&gt;&lt;/a&gt;&lt;%= theme.stat.title %&gt;&lt;/h1&gt;                &lt;%                    var article_posts = [];                    site.posts.forEach(post =&gt; {                        article_posts.push(post);                    });                                        for (var i = 0; i &lt; article_posts.length - 1; i++) {                        for (var j = 1; j &lt; article_posts.length - i; j++) {                            if (article_posts[j].date &gt; article_posts[j-1].date) {                                var tmp = article_posts[j];                                article_posts[j] = article_posts[j-1];                                article_posts[j-1] = tmp;                            }                        }                    }                                        var post_date_index = null;                    article_posts.forEach(post =&gt; {                        pwd = post.password;                        if ((!(pwd &amp;&amp; pwd.length &gt; 0))&amp;&amp;(post.hide != true)) {                            if (date(post.date, 'YYYY-MM') != post_date_index) {                                post_date_index = date(post.date, 'YYYY-MM');                %&gt;                &lt;h2 id="&lt;%= post_date_index %&gt;"&gt;&lt;a href="#&lt;%= post_date_index %&gt;" class="headerlink" title="&lt;%= post_date_index %&gt;"&gt;&lt;/a&gt;&lt;%= post_date_index %&gt;&lt;/h2&gt;                            &lt;% } %&gt;                &lt;p&gt;                    &lt;code&gt;&lt;%= date(post.date, 'YYYY-MM-DD') %&gt;&lt;/code&gt;&amp;ensp;-                    &lt;a href="&lt;%- url_for(post.path) %&gt;"&gt;&lt;%= post.title %&gt;&lt;/a&gt;                &lt;/p&gt;                        &lt;% } %&gt;                    &lt;% }); %&gt;                &lt;% } %&gt;            &lt;/div&gt;        &lt;/div&gt;        &lt;style type="text/css"&gt;            #posts-chart,            #categories-chart,            #tags-chart {                width: 100%;                height: 300px;                margin: 0.5rem auto;                padding: 0.5rem;            }        &lt;/style&gt;        &lt;div class="card"&gt;            &lt;div class="card-content"&gt;                &lt;div class="chart col s12 m6 l4" data-aos="zoom-in-up"&gt;                    &lt;div id="posts-chart"&gt;&lt;/div&gt;                &lt;/div&gt;            &lt;/div&gt;        &lt;/div&gt;        &lt;div class="card"&gt;            &lt;div class="card-content"&gt;                &lt;div class="chart col s12 m6 l4" data-aos="zoom-in-up"&gt;                    &lt;div id="tags-chart"&gt;&lt;/div&gt;                &lt;/div&gt;            &lt;/div&gt;        &lt;/div&gt;        &lt;div class="card"&gt;            &lt;div class="card-content"&gt;                &lt;div class="chart col s12 m6 l4" data-aos="zoom-in-up"&gt;                    &lt;div id="categories-chart"&gt;&lt;/div&gt;                &lt;/div&gt;            &lt;/div&gt;        &lt;/div&gt;        &lt;!-- &lt;div class="card"&gt;            &lt;div class="card-content"&gt;                            &lt;/div&gt;        &lt;/div&gt; --&gt;    &lt;/div&gt;    &lt;% if (site.categories &amp;&amp; site.categories.length &gt; 0) { %&gt;    &lt;%- partial('_widget/category-radar') %&gt;    &lt;% } %&gt;                &lt;script type="text/javascript" src="&lt;%- theme.jsDelivr.url %&gt;&lt;%- url_for(theme.libs.js.echarts) %&gt;"&gt;&lt;/script&gt;    &lt;script&gt;        let postsChart = echarts.init(document.getElementById('posts-chart'));        let categoriesChart = echarts.init(document.getElementById('categories-chart'));        let tagsChart = echarts.init(document.getElementById('tags-chart'));            &lt;%        /* calculate postsOption data. */        var startDate = moment().subtract(1, 'years').startOf('month');        var endDate = moment().endOf('month');            var monthMap = new Map();        var dayTime = 3600 * 24 * 1000;        for (var time = startDate; time &lt;= endDate; time += dayTime) {            var month = moment(time).format('YYYY-MM');            if (!monthMap.has(month)) {                monthMap.set(month, 0);            }        }            // post and count map.        site.posts.forEach(function (post) {            var month = post.date.format('YYYY-MM');            if (monthMap.has(month)) {                monthMap.set(month, monthMap.get(month) + 1);            }        });            // xAxis data and yAxis data.        var monthArr = JSON.stringify([...monthMap.keys()]);        var monthValueArr = JSON.stringify([...monthMap.values()]);        %&gt;            let postsOption = {            title: {                text: '&lt;%- __("postPublishChart")  %&gt;',                top: -5,                x: 'center'            },            tooltip: {                trigger: 'axis'            },            xAxis: {                type: 'category',                data: &lt;%- monthArr %&gt;            },            yAxis: {                type: 'value',            },            series: [                {                    name: '&lt;%- __("postsNumberName")  %&gt;',                    type: 'line',                    color: ['#6772e5'],                    data: &lt;%- monthValueArr %&gt;,                    markPoint: {                        symbolSize: 45,                        color: ['#fa755a','#3ecf8e','#82d3f4'],                        data: [{                            type: 'max',                            itemStyle: {color: ['#3ecf8e']},                            name: '&lt;%- __("maximum")  %&gt;'                        }, {                            type: 'min',                            itemStyle: {color: ['#fa755a']},                            name: '&lt;%- __("minimum")  %&gt;'                        }]                    },                    markLine: {                        itemStyle: {color: ['#ab47bc']},                        data: [                            {type: 'average', name: '&lt;%- __("average")  %&gt;'}                        ]                    }                }            ]        };            &lt;%        /* calculate categoriesOption data. */        var categoryArr = [];        site.categories.map(function(category) {            categoryArr.push({'name': category.name, 'value': category.length})        });            var categoryArrJson = JSON.stringify(categoryArr);        %&gt;            let categoriesOption = {            title: {                text: '&lt;%- __("categoriesChart")  %&gt;',                top: -4,                x: 'center'            },            tooltip: {                trigger: 'item',                formatter: "{a} &lt;br/&gt;{b} : {c} ({d}%)"            },            series: [                {                    name: '&lt;%- __("categories")  %&gt;',                    type: 'pie',                    radius: '50%',                    color: ['#6772e5', '#ff9e0f', '#fa755a', '#3ecf8e', '#82d3f4', '#ab47bc', '#525f7f', '#f51c47', '#26A69A'],                    data: &lt;%- categoryArrJson %&gt;,                    itemStyle: {                        emphasis: {                            shadowBlur: 10,                            shadowOffsetX: 0,                            shadowColor: 'rgba(0, 0, 0, 0.5)'                        }                    }                }            ]        };            &lt;%        /* calculate tagsOption data. */        // get all tags name and count,then order by length desc.        var tagArr = [];        site.tags.map(function(tag) {            tagArr.push({'name': tag.name, 'value': tag.length});        });        tagArr.sort((a, b) =&gt; {return b.value - a.value});            // get Top 10 tags name and count.        var tagNameArr = [];        var tagCountArr = [];        for (var i = 0, len = Math.min(tagArr.length, 10); i &lt; len; i++) {            tagNameArr.push(tagArr[i].name);            tagCountArr.push(tagArr[i].value);        }            var tagNameArrJson = JSON.stringify(tagNameArr);        var tagCountArrJson = JSON.stringify(tagCountArr);        %&gt;            let tagsOption = {            title: {                text: '&lt;%- __("top10TagsChart")  %&gt;',                top: -5,                x: 'center'            },            tooltip: {},            xAxis: [                {                    type: 'category',                    data: &lt;%- tagNameArrJson %&gt;                }            ],            yAxis: [                {                    type: 'value'                }            ],            series: [                {                    type: 'bar',                    color: ['#82d3f4'],                    barWidth : 18,                    data: &lt;%- tagCountArrJson %&gt;,                    markPoint: {                        symbolSize: 45,                        data: [{                            type: 'max',                            itemStyle: {color: ['#3ecf8e']},                            name: '&lt;%- __("maximum")  %&gt;'                        }, {                            type: 'min',                            itemStyle: {color: ['#fa755a']},                            name: '&lt;%- __("minimum")  %&gt;'                        }],                    },                    markLine: {                        itemStyle: {color: ['#ab47bc']},                        data: [                            {type: 'average', name: '&lt;%- __("average")  %&gt;'}                        ]                    }                }            ]        };            // render the charts        postsChart.setOption(postsOption);        categoriesChart.setOption(categoriesOption);        tagsChart.setOption(tagsOption);    &lt;/script&gt;            &lt;/main&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>在主题配置文件中添加：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"># 统计stat:  title: 文章统计  # 标题  text: 身处不幸的时候，更应该竭尽全力。  # 一言  icon: far fa-bar-chart  # 图标  show_post: true  # 是否显示文章统计<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>添加菜单导航，生成静态文件即可</p></blockquote><h2 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h2><ul><li>获取所有文章信息</li></ul><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs">var article_posts = [];site.posts.forEach(post =&gt; {    article_posts.push(post);});<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li>按发布时间前后排序</li></ul><p>我写的比较草率，你有更好的排序算法直接更改即可，应该可以提高生成效率</p><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs">for (var i = 0; i &lt; article_posts.length - 1; i++) {    for (var j = 1; j &lt; article_posts.length - i; j++) {        if (article_posts[j].date &gt; article_posts[j-1].date) {            var tmp = article_posts[j];            article_posts[j] = article_posts[j-1];            article_posts[j-1] = tmp;        }    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>遍历所有文章信息，忽略加密文章和隐藏文章，再根据文章日期分类</li></ul><pre class="line-numbers language-ejs" data-language="ejs"><code class="language-ejs">var post_date_index = null;article_posts.forEach(post =&gt; {    pwd = post.password;    if ((!(pwd &amp;&amp; pwd.length &gt; 0))&amp;&amp;(post.hide != true)) {        if (date(post.date, 'YYYY-MM') != post_date_index) {            post_date_index = date(post.date, 'YYYY-MM');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>Over!</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Matery </tag>
            
            <tag> 统计 </tag>
            
            <tag> 归档 </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>Hexo(Matery)自定义(一)：添加游戏项目</title>
      <link href="/article/36588/"/>
      <url>/article/36588/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li><p>游戏资源均来自于网络，如有侵权，联系删除</p></li><li><p>想法：增加一点娱乐性</p></li></ul><h2 id="游戏资源下载"><a href="#游戏资源下载" class="headerlink" title="游戏资源下载"></a>游戏资源下载</h2><ul><li>下载下来可以直接在电脑打开<code>index.html</code>文件预览</li></ul><p><code>魔方</code>: <a href="https://pan.baidu.com/s/1xHHmYlqWNpxf-6b6TVvmTA?pwd=uneu">https://pan.baidu.com/s/1xHHmYlqWNpxf-6b6TVvmTA?pwd=uneu</a> 提取码: uneu </p><p><code>扫雷</code>: <a href="https://pan.baidu.com/s/1r_NGhNsYdfn_3qZOO4WhPQ?pwd=nfp5">https://pan.baidu.com/s/1r_NGhNsYdfn_3qZOO4WhPQ?pwd=nfp5</a> 提取码: nfp5</p><p><code>2048</code>: <a href="https://pan.baidu.com/s/1oC_xbeGRM3EDOGTCFa1xeg?pwd=zjjw">https://pan.baidu.com/s/1oC_xbeGRM3EDOGTCFa1xeg?pwd=zjjw</a> 提取码: zjjw</p><p><code>五子棋</code>: <a href="https://pan.baidu.com/s/1eFrMLNJWZHnzJt78pyzkeA?pwd=wuap">https://pan.baidu.com/s/1eFrMLNJWZHnzJt78pyzkeA?pwd=wuap</a> 提取码: wuap</p><p><code>推箱子</code>: <a href="https://pan.baidu.com/s/1enPereRgMfVGBEAFgBTa5g?pwd=cp6n">https://pan.baidu.com/s/1enPereRgMfVGBEAFgBTa5g?pwd=cp6n</a> 提取码: cp6n</p><h2 id="部署游戏"><a href="#部署游戏" class="headerlink" title="部署游戏"></a>部署游戏</h2><ul><li>新建页面<code>game</code>：</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo new page game<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>然后将下载的游戏文件上传至网站根目录下的<code>source/game/</code>目录即可</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>如果你直接生成静态文件，会发现游戏项目内的<code>html</code>文件被重新编译了，无法玩，所以在网站配置中找到<code>skip_render</code>项，配置如下：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">skip_render:   - 'game/*/**'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这样使<code>game</code>目录下所有目录当中的文件不被编译，你也可以根据实际情况更改，如果只想<code>html</code>文件不被编译，可以配置为：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">skip_render:   - 'game/*/*.html'<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>然后在主题配置下添加菜单导航，最后生成静态文件即可</p></blockquote><ul><li>我用的主题使<code>Matery</code>，部分菜单导航配置如下：</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">menu:  Index:    url: /    icon: fas fa-home  Game:    icon: fa-solid fa-gamepad    url: /game    children:      - name: 魔方        url: /game/mf        icon: fa-solid fa-cube      - name: 扫雷        url: /game/sl        icon: fa-brands fa-galactic-republic      - name: 2048        url: /game/2048        icon: fa-brands fa-pix      - name: 五子棋        url: /game/wzq        icon: fa-solid fa-chess-board      - name: 推箱子        url: /game/txz        icon: fa-solid fa-box<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>在主题下的 <code>languages/zh-CN.yml</code> 文件中添加：</li></ul><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">Game: 娱乐<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>Over!</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Matery </tag>
            
            <tag> html </tag>
            
            <tag> game </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>CentOS安装wkhtmltox（wkhtmltopdf）</title>
      <link href="/article/38139/"/>
      <url>/article/38139/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li><p>wkhtmltopdf是一个能够把HTML转PDF的软件，用着效果不错</p></li><li><p>快捷安装脚本只兼容centos7-64位，安装命令：</p></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wget https://github.com/zw-space/wkhtmltox/blob/main/wkhtmltox-install-centos7.x86_64.shbash wkhtmltox-install-centos7.x86_64.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="下载wkhtmltox"><a href="#下载wkhtmltox" class="headerlink" title="下载wkhtmltox"></a>下载wkhtmltox</h2><p>前往 <a href="https://wkhtmltopdf.org/downloads.html">wkhtmltox</a> 官网下载对应版本</p><p>或者执行：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wget https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6-1/wkhtmltox-0.12.6-1.centos7.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="下载依赖"><a href="#下载依赖" class="headerlink" title="下载依赖"></a>下载依赖</h2><ul><li>下载过后直接安装的话一般会报依赖的错误，所以先安装依赖</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum install -y xorg-x11-fonts-75dpiyum install -y xorg-x11-fonts-Type1yum install -y libXextyum install -y libjpegyum install -y libXrender<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>直接执行即可：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rpm -ivh wkhtmltox-0.12.6-1.centos7.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="配置中文"><a href="#配置中文" class="headerlink" title="配置中文"></a>配置中文</h2><ul><li><p>安装过后直接使用，一般会显示不出中文，所以要配置中文</p></li><li><p>Windwos字体库：<code>C:\Windows\Fonts</code> 中上传 <code>simsun.ttc</code> 文件之Linux目录 <code>/usr/share/fonts</code> 即可</p></li></ul><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><ul><li>输入以下命令测试，会生成一个pdf文件：</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wkhtmltopdf --encoding utf-8 https://www.baidu.com baidu.pdf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>或者</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wkhtmltopdf https://www.baidu.com baidu.pdf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> wkhtmltox </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>Linux（CentOS）虚拟机应急模式修复方法</title>
      <link href="/article/36275/"/>
      <url>/article/36275/</url>
      
        <content type="html"><![CDATA[<ul><li><p>正准备用虚拟机来测试一些东西，结果突然进不去，翻译一下理解是进入了应急模式</p></li><li><p>我们在使用vmware虚拟机（安装CentOS操作系统）常常因为非正常断电而导致再次启动时，提示进入紧急模式，而无法进入系统的情况，如下图所示：</p></li></ul><p><img src="https://i2.100024.xyz/2022/07/23/ppxx08.webp" alt="应急模式"></p><p>依次输入如下三条命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">umount /dev/mapper/centos-rootxfs_repair -v -L /dev/mapper/centos-rootreboot<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><blockquote><p>等待重启即可</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> Linux </tag>
            
            <tag> 应急模式 </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>Typecho个人博客的搭建</title>
      <link href="/article/40722/"/>
      <url>/article/40722/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li><p>Demo：<a href="http://typecho.wzspace.cn/">http://typecho.wzspace.cn/</a></p></li><li><p>Typecho要求PHP版本7.2以上，不满足的话请升级，我这里使用8.1版本的</p></li><li><p>本文使用到宝塔面板管理站点，安装参考：<a href="/article/52020/">宝塔面板安装和基本配置</a></p></li></ul><h2 id="新建站点"><a href="#新建站点" class="headerlink" title="新建站点"></a>新建站点</h2><ul><li>此步需要有域名，记得添加域名解析记录</li></ul><p>前往宝塔面板，点击<code>网站-&gt;新建站点</code>，同时新建数据库（记住数据库名和密码）：</p><p><img src="https://i2.100024.xyz/2022/07/23/kj3uu2.webp" alt="新建站点"></p><h2 id="Typecho部署"><a href="#Typecho部署" class="headerlink" title="Typecho部署"></a>Typecho部署</h2><ul><li>前往 <a href="http://typecho.org/">Typecho官网</a> 下载安装包，本次使用的已存到网盘：<a href="https://pan.baidu.com/s/1MuE3IMcddHzyAjRJqaN8qg?pwd=8d28">https://pan.baidu.com/s/1MuE3IMcddHzyAjRJqaN8qg?pwd=8d28</a> 提取码: 8d28</li></ul><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>点击进入网站根目录，将压缩包上传并解压，然后删除压缩包即可：</p><p><img src="https://i2.100024.xyz/2022/07/23/kk3sgj.webp" alt="网站详情"></p><p><img src="https://i2.100024.xyz/2022/07/23/kd25nh.webp" alt="网站根目录"></p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>直接访问站点，我这里是 <code>typecho.wzspace.cn</code>：</p><p><img src="https://i2.100024.xyz/2022/07/23/klv8kg.webp" alt="访问站点"></p><p>点击下一步，填写数据库信息：</p><p><img src="https://i2.100024.xyz/2022/07/23/kmm5ie.webp" alt="填写数据库信息"></p><p>点击开始安装，填写管理员账号，然后继续安装即可：</p><p><img src="https://i2.100024.xyz/2022/07/23/knn52j.webp" alt="管理员账号"></p><p>站点首页如下图所示：</p><p><img src="https://i2.100024.xyz/2022/07/23/kozhgo.webp" alt="站点首页"></p><h2 id="Typecho设置"><a href="#Typecho设置" class="headerlink" title="Typecho设置"></a>Typecho设置</h2><h3 id="地址重写"><a href="#地址重写" class="headerlink" title="地址重写"></a>地址重写</h3><ul><li>在管理面板，<code>设置-&gt;永久链接</code>中，是否使用地址重写功能，这个功能开启后可以是链接更友好，美观，但默认情况下开启会报错</li></ul><p>前往宝塔面板，点击网站，找到我们刚才创建的站点，点击设置，点击伪静态，然后在右上角处有个选项，划到底大概倒数第5个，选择typecho，保存即可</p><p><img src="https://i2.100024.xyz/2022/07/23/limlhp.webp" alt="伪静态"></p><p>然后前往网站设置（如果找不到了，访问 <code>域名/admin/</code> 即可，我这里是 <code>typecho.wzspace.cn/admin/</code>），找到永久链接，更改设置，保存即可</p><p><img src="https://i2.100024.xyz/2022/07/23/ljg5jx.webp" alt="永久链接设置"></p><h3 id="主题设置"><a href="#主题设置" class="headerlink" title="主题设置"></a>主题设置</h3><ul><li><p>主题配置很简单，下载主题压缩包，解压到网站目录下的 <code>usr/themes/</code> 目录下即可</p></li><li><p>我存有部分主题，下载链接：<a href="https://github.com/zw-space/typecho-themes">https://github.com/zw-space/typecho-themes</a></p></li></ul><p>有git工具，可以用一下命令下载到本地：</p><pre class="line-numbers language-git" data-language="git"><code class="language-git">git clone https://github.com/zw-space/typecho-themes.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如果你运气不好，访问速度差，网盘链接: <a href="https://pan.baidu.com/s/1Z9ADExIo4ycptDZutb04CA?pwd=67nq">https://pan.baidu.com/s/1Z9ADExIo4ycptDZutb04CA?pwd=67nq</a> 提取码: 67nq</p><blockquote><p>typecho走的是轻简路线，所以主题自然不花哨</p></blockquote><blockquote><p>个人比较喜欢 <code>Optica</code> 主题</p></blockquote><h3 id="评论日期设置"><a href="#评论日期设置" class="headerlink" title="评论日期设置"></a>评论日期设置</h3><p><code>设置-&gt;评论</code>里可以设置日期格式，我设置的是：<code>Y-m-d H:i</code></p><h3 id="更改站点图标"><a href="#更改站点图标" class="headerlink" title="更改站点图标"></a>更改站点图标</h3><ul><li>我找遍了typecho的项目目录，没有发现有图标这个东西，没办法，改不了，只能添加</li></ul><p>打开 <code>控制台-&gt;外观</code>，点击编辑当前外观：</p><p><img src="https://i2.100024.xyz/2022/07/23/nooogq.webp" alt="外观编辑"></p><p>稍微留意就会发现，除了404页面，其他页面都引用了 <code>header.php</code> 文件，语法：</p><pre class="line-numbers language-PHP" data-language="PHP"><code class="language-PHP">$this-&gt;need('header.php'); ?&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>修改 <code>header.php</code> 文件，在合适的位置添加如下代码，网址对应图标url：</p><pre class="line-numbers language-PHP" data-language="PHP"><code class="language-PHP">&lt;!-- 网站图标 --&gt;&lt;link rel="icon" type="image/png" href="https://s3.bmp.ovh/imgs/2022/07/23/7d5e682ab2cecb98.png"&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ul><li>我添加在<code>title</code>下面：</li></ul><p><img src="https://i2.100024.xyz/2022/07/23/nu0of5.webp" alt="添加图标"></p><blockquote><p>想要在404界面也显示图标，同理添加在合适的位置即可</p></blockquote><blockquote><p>其他设置自行研究</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Typecho </tag>
            
            <tag> 个人博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>笔记系统Leanote的安装和部署</title>
      <link href="/article/64935/"/>
      <url>/article/64935/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul><li><p>Demo：<a href="http://note.wzspace.cn/">http://note.wzspace.cn/</a></p></li><li><p>本文使用到宝塔面板管理站点，安装参考：<a href="/article/52020/">宝塔面板安装和基本配置</a></p></li></ul><h2 id="新建站点"><a href="#新建站点" class="headerlink" title="新建站点"></a>新建站点</h2><ul><li><p>因为leanote默认使用<code>9000</code>端口，而不是常用的<code>80</code>端口，因此新建站点，然后开启反向代理访问leanote</p></li><li><p>此步需要有域名，如没有，也可以跳过，然后开启服务器安全组规则<code>9000</code>端口号，通过<code>公网IP:9000</code>访问</p></li><li><p>记得添加域名解析记录</p></li></ul><p>前往宝塔界面，点击<code>网站-&gt;新建站点</code>：</p><p><img src="https://i2.100024.xyz/2022/07/22/u019dg.webp" alt="新建站点"></p><p>然后点击<code>设置-&gt;反向代理-&gt;添加反向代理</code>，按照下图填写对应规则后确认：</p><p><img src="https://i2.100024.xyz/2022/07/22/u4zw1v.webp" alt="添加反向代理"></p><p><img src="https://i2.100024.xyz/2022/07/22/u4znhe.webp" alt="反向代理设置"></p><h2 id="安装MongoDB"><a href="#安装MongoDB" class="headerlink" title="安装MongoDB"></a>安装MongoDB</h2><p>直接在宝塔面板的软件商店搜索，安装即可：</p><p><img src="https://i2.100024.xyz/2022/07/22/u8o8ge.webp" alt="安装MongoDB"></p><blockquote><p>如没有安装宝塔面板，自行搜索安装MongoDB</p></blockquote><h2 id="安装Leanote"><a href="#安装Leanote" class="headerlink" title="安装Leanote"></a>安装Leanote</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><p>下载链接：<a href="https://udomain.dl.sourceforge.net/project/leanote-bin/2.6.1/leanote-linux-amd64-v2.6.1.bin.tar.gz">https://udomain.dl.sourceforge.net/project/leanote-bin/2.6.1/leanote-linux-amd64-v2.6.1.bin.tar.gz</a></p><p>可在Linux中输入以下命令下载：</p><pre class="line-numbers language-s" data-language="s"><code class="language-s">wget https://udomain.dl.sourceforge.net/project/leanote-bin/2.6.1/leanote-linux-amd64-v2.6.1.bin.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>如果访问速度慢，可以先下载到自己的电脑，再上传至服务器</p></li><li><p>如果本地下载还是慢，网盘链接：<a href="https://pan.baidu.com/s/1i3z9wvvZ59QnXOj2Cdp-oA?pwd=qda8">https://pan.baidu.com/s/1i3z9wvvZ59QnXOj2Cdp-oA?pwd=qda8</a></p></li></ul><h3 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h3><ul><li>到压缩包保存目录解压</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">tar -zxvf leanote-linux-amd64-v2.6.1.bin.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><p>如果前面新建了站点，建议将leanote目录移动至目录 <code>/www/wwwroot/note.wzspace.cn/</code>，方便管理</p></li><li><p><code>note.wzspace.cn</code>是站点名称</p></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mv leanote /www/wwwroot/note.wzspace.cn/cd /www/wwwroot//note.wzspace.cn/ls<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="导入数据库"><a href="#导入数据库" class="headerlink" title="导入数据库"></a>导入数据库</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cd leanotemongorestore -h localhost -d leanote --dir mongodb_backup/leanote_install_data/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="更改配置"><a href="#更改配置" class="headerlink" title="更改配置"></a>更改配置</h3><p>更改文件<code>leanote/conf/app.conf</code>文件中的<code>app.secret</code>的值，随意更改，为了安全</p><h2 id="启动Leanote"><a href="#启动Leanote" class="headerlink" title="启动Leanote"></a>启动Leanote</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bash bin/run.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>启动成功后：</p><p><img src="https://i2.100024.xyz/2022/07/22/ulrfj7.webp" alt="启动Leanote"></p><p>启动后通过<code>note.wzspace.cn</code>访问或者通过<code>公网IP:9000</code>访问：</p><p><img src="https://i2.100024.xyz/2022/07/22/vg5dnf.webp" alt="Leanote"></p><h2 id="后台运行"><a href="#后台运行" class="headerlink" title="后台运行"></a>后台运行</h2><p>直接这样启动，关闭<code>ssh</code>终端后leanote就会关闭，可以放到后台运行：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nohup bash bin/run.sh &gt; leanote_run.log 2&gt;&amp;1 &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>更多命令，参考：<a href="http://wzspace.cn/article/61876/">CentOS7 进程管理</a></li></ul><h2 id="配置Leanote"><a href="#配置Leanote" class="headerlink" title="配置Leanote"></a>配置Leanote</h2><p>再 <a href="http://note.wzspace.cn/">Leanote</a> 首页切换简体中文，点击登录就可以使用了</p><ul><li>默认管理员账号密码，账号：<code>admin</code>，密码：<code>abc123</code></li></ul><p><img src="https://i2.100024.xyz/2022/07/22/vl821m.webp" alt="登录Leanote"></p><h3 id="更改URL"><a href="#更改URL" class="headerlink" title="更改URL"></a>更改URL</h3><p>点击<code>右上角-&gt;后台管理</code>，然后点击<code>Configuration-&gt;Site's URL</code>，将内容修改为<code>http://note.wzspace.cn</code>（对应自己的域名），<code>http://公网IP:9000</code></p><p><img src="https://i2.100024.xyz/2022/07/22/vo6k10.webp" alt="后台管理"></p><h3 id="用户设置"><a href="#用户设置" class="headerlink" title="用户设置"></a>用户设置</h3><ul><li><p><code>Configuration-&gt;Open Register</code>可以选择是否开放注册</p></li><li><p>用户处可以修改密码，可以添加用户</p></li><li><p>更改<code>admin</code>用户名使用邮箱登录，默认：<code>admin@leanote.com</code></p></li></ul><h3 id="主题设置"><a href="#主题设置" class="headerlink" title="主题设置"></a>主题设置</h3><p>回到主页，点击<code>右上角-&gt;博客设置</code>，然后点击<code>主题-&gt;导入主题</code>，我存有部分主题，下载链接：<a href="https://github.com/zw-space/leanote-themes">https://github.com/zw-space/leanote-themes</a></p><p>有git工具，可以用一下命令下载到本地：</p><pre class="line-numbers language-git" data-language="git"><code class="language-git">git clone https://github.com/zw-space/leanote-themes.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>如果你运气不好，访问速度差，网盘链接：<a href="https://pan.baidu.com/s/1-Y7GCz1L0cvP1jeTylRBZA?pwd=5axg">https://pan.baidu.com/s/1-Y7GCz1L0cvP1jeTylRBZA?pwd=5axg</a> 提取码: 5axg</p></blockquote><blockquote><p>个人认为，蚂蚁笔记提供的博客主题都差不多。</p></blockquote><ul><li><p><code>黑色幽默</code>主题记笔记较好，但对代码片段不友好</p></li><li><p><code>Leanote default theme</code>主题整体挺好</p></li></ul><h3 id="配置导出pdf"><a href="#配置导出pdf" class="headerlink" title="配置导出pdf"></a>配置导出pdf</h3><p>导出PDF需要安装<a href="https://wkhtmltopdf.org/">wkhtmltopdf</a>到目录<code>/usr/local/bin/wkhtmltopdf</code>下，安装参考：<a href="https://blog.csdn.net/u012561176/article/details/86487664">https://blog.csdn.net/u012561176/article/details/86487664</a></p><h3 id="站点图标"><a href="#站点图标" class="headerlink" title="站点图标"></a>站点图标</h3><blockquote><p>修改站点图标：替换文件<code>leanote/public/images/favicon.ico</code>即可</p></blockquote><blockquote><p>其他设置慢慢琢磨吧</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Leanote </tag>
            
            <tag> 蚂蚁笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>Linux 进程管理</title>
      <link href="/article/61876/"/>
      <url>/article/61876/</url>
      
        <content type="html"><![CDATA[<h2 id="查看进程"><a href="#查看进程" class="headerlink" title="查看进程"></a>查看进程</h2><h3 id="ps命令"><a href="#ps命令" class="headerlink" title="ps命令"></a>ps命令</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ps aux<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>命令解释</p></blockquote><ul><li>a 显示当前终端下的所有进程信息，包括其他用户的进程</li><li>u 以用户为主的进程状态</li><li>x 显示所有进程，不以终端机来区分</li><li>-e：显示系统内所有的进程信息</li><li>-l ：使用长格式显示进程信息</li><li>-f ：使用完整的格式显示进程信息</li></ul><blockquote><p>显示出来的信息</p></blockquote><p>USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</p><ul><li>USER 启动这些进程的用户</li><li>PID 进程的PID</li><li>%CPU 进程占用CPU的百分比</li><li>%MEM 进程占用内存的百分比</li><li>VSZ 进程占用的虚拟内存大小（KB）</li><li>RSS 进程占用的物理内存的大小（KB）</li><li>START 该进程被触发的时间</li><li>TIME 该进程实际使用CPU运作的时间</li><li>COMMAND 该程序使用的指令</li><li>STAT 该程序目前的状态，linux进程有五种基本状态：<ul><li>R 该程序目前正在工作，或者是可被运作</li><li>S 该进程目前正在睡眠中，可被某些讯号唤醒</li><li>T 该程序目前正在侦测或者是停止了</li><li>Z 该进程应该已经被终止，但是其父程序却无法正常终止他，造成僵尸进程</li><li>D 不可中断状态</li><li>五个基本状态后的小状态：<ul><li>&lt; 表示进程运行在高优先级上</li><li>N 表示进程运行在低优先级上</li><li>L 表示进程有页面锁定在内存中</li><li>s 表示进程是控制进程</li><li>l 表示进程是多线程</li><li>+ 表示当前进程运行在前台</li></ul></li></ul></li></ul><h3 id="pstree命令"><a href="#pstree命令" class="headerlink" title="pstree命令"></a>pstree命令</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pstree<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>显示出来的信息</p></blockquote><p>各个进程的树形结构</p><h3 id="pgrep命令"><a href="#pgrep命令" class="headerlink" title="pgrep命令"></a>pgrep命令</h3><ul><li>例：匹配用户<code>root</code>下包含<code>ssh</code>的最新进程的<code>“PID、进程名和完整的命令行”</code></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pgrep -lanu root ssh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>命令解释</p></blockquote><ul><li>-d, –delimiter <string> 指定输出分隔符</string></li><li>-l, –list-name 列出PID和进程名</li><li>-a, –list-full 列出 PID 和完整的命令行</li><li>-v, –inverse 否定匹配</li><li>-w, –lightweight 列出所有 TID</li><li>-c, –count 匹配进程的计数</li><li>-f, –full 使用完整的进程名来匹配</li><li>-n, –newest 选择最近开始的</li><li>-o, –oldest 选择最初开始的</li><li>-s, –session &lt;SID,…&gt; 匹配会话 ID</li><li>-u, –euid &lt;ID,…&gt; 指定用户</li><li>-x, –exact 与命令名完全匹配</li></ul><blockquote><p>注意：pgrep使用正则匹配</p></blockquote><blockquote><p>和ps命令一起使用</p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ps aux | grep ssh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="top命令"><a href="#top命令" class="headerlink" title="top命令"></a>top命令</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">top<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>显示出来的信息</p></blockquote><ul><li>Tasks: <ul><li>total 总进程数</li><li>running 正在运行的进程数</li><li>sleeping 睡眠的进程数</li><li>stopped 停止的进程数</li><li>zombie 僵尸进程数</li></ul></li><li>%Cpu(s):<ul><li>us 系统用户进程使用CPU百分比</li><li>sy 内核中的进程占用CPU百分比</li><li>ni 用户进程空间内改变过优先级的进程占用CPU百分比</li><li>id 空闲的CPU百分比</li><li>wa CPU等待I/O完成的时间总量</li><li>hi 硬中断占比</li><li>si 软中断占比</li><li>st 虚拟机占用物理的时间，例如物理机运行了KVM，则表示KVM占用物理机的CPU时间</li></ul></li><li>KiB Mem:<ul><li>total 物理内存总量</li><li>free 空闲内存总量</li><li>used 使用的物理内存总量</li><li>buff/cache 内核缓存内存量</li></ul></li><li>KiB Swap<ul><li>total 交换分区总量</li><li>free 空闲交换分区总量</li><li>used 使用的交换分区总量</li><li>cached 可利用内存总量</li></ul></li></ul><blockquote><p>快捷键</p></blockquote><ul><li>q 退出</li><li>P 按CPU排序按CPU排序</li><li>M 按内存排序</li><li>T 按时间排序</li><li>1 显示每个内核的CPU使用率</li><li>u/U 指定显示的用户</li><li>h: 帮助</li><li>-p: <code>top -p 进程号</code>，查看某个进程状态</li></ul><h3 id="uptime查看系统负载"><a href="#uptime查看系统负载" class="headerlink" title="uptime查看系统负载"></a>uptime查看系统负载</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">uptime<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>显示出来的信息</p></blockquote><p>对应系统时间，系统已运行时间，登录用户数，load average（分别为1分钟、5分钟、15分钟前到现在的平均值）</p><h2 id="后台运行进程"><a href="#后台运行进程" class="headerlink" title="后台运行进程"></a>后台运行进程</h2><h3 id="amp-命令"><a href="#amp-命令" class="headerlink" title="&amp;命令"></a>&amp;命令</h3><p>在运行命令后面加上&amp;：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bash test.sh &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="nohup命令"><a href="#nohup命令" class="headerlink" title="nohup命令"></a>nohup命令</h3><p>nohup的方法可以使终端关闭后依旧保持运行：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nohup bash test.sh &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>该程序默认输出在nohup.out文件，通过指令重定向输出文件：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nohup bash test.sh &gt; test.log 2&gt;&amp;1 &amp;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>其中2&gt;&amp;1表示将错误输出重定向到标准输出</p><h2 id="杀死进程"><a href="#杀死进程" class="headerlink" title="杀死进程"></a>杀死进程</h2><h3 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h3><h4 id="显示可用的信号"><a href="#显示可用的信号" class="headerlink" title="显示可用的信号"></a>显示可用的信号</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kill -l<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="强制终止进程"><a href="#强制终止进程" class="headerlink" title="强制终止进程"></a>强制终止进程</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kill -KILL 123456<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="彻底杀死进程"><a href="#彻底杀死进程" class="headerlink" title="彻底杀死进程"></a>彻底杀死进程</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kill -9 进程pid<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="杀死指定用户的进程"><a href="#杀死指定用户的进程" class="headerlink" title="杀死指定用户的进程"></a>杀死指定用户的进程</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kill -u test<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>注意：Linux的<code>kill</code>命令是向进程发送信号，<code>kill</code>不是杀死的意思，<code>-9</code>表示无条件退出，但由进程自行决定是否退出，这就是为什么<code>kill -9</code>终止不了系统进程和守护进程的原因。</p></blockquote><h3 id="killall"><a href="#killall" class="headerlink" title="killall"></a>killall</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">killall 进程名称 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 进程 </tag>
            
            <tag> 服务器管理 </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>conda命令使用</title>
      <link href="/article/44489/"/>
      <url>/article/44489/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>未安装conda参考：</p><ul><li>CentOS7：<a href="/article/31589/">Linux安装 Anaconda</a></li><li>Windows：建议直接安装Anaconda</li></ul><p>命令解释：</p><ul><li><code>env_name</code> 虚拟环境名称</li></ul><h2 id="版本管理"><a href="#版本管理" class="headerlink" title="版本管理"></a>版本管理</h2><h3 id="帮助目录"><a href="#帮助目录" class="headerlink" title="帮助目录"></a>帮助目录</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda create -h<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="检查版本"><a href="#检查版本" class="headerlink" title="检查版本"></a>检查版本</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda --version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="升级版本"><a href="#升级版本" class="headerlink" title="升级版本"></a>升级版本</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda update conda<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="环境管理"><a href="#环境管理" class="headerlink" title="环境管理"></a>环境管理</h2><h3 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda create --name env_name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="列出所有环境"><a href="#列出所有环境" class="headerlink" title="列出所有环境"></a>列出所有环境</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda info --envs<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>或者：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda env list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="激活指定环境"><a href="#激活指定环境" class="headerlink" title="激活指定环境"></a>激活指定环境</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda activate env_name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="停用当前环境"><a href="#停用当前环境" class="headerlink" title="停用当前环境"></a>停用当前环境</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda deactivate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="移除指定环境"><a href="#移除指定环境" class="headerlink" title="移除指定环境"></a>移除指定环境</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda remove --name env_name --all<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="创建指定版本的环境"><a href="#创建指定版本的环境" class="headerlink" title="创建指定版本的环境"></a>创建指定版本的环境</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda create --name env_name python=3.7<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="复制指定环境"><a href="#复制指定环境" class="headerlink" title="复制指定环境"></a>复制指定环境</h3><ul><li>复制 <code>old_env_name</code>，创建新环境</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda create --name env_name --clone old_env_name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h2><ul><li>进入环境后可以使用 <code>pip</code> 命令进行安装管理</li></ul><h3 id="列出已安装的包"><a href="#列出已安装的包" class="headerlink" title="列出已安装的包"></a>列出已安装的包</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="列出指定环境的包"><a href="#列出指定环境的包" class="headerlink" title="列出指定环境的包"></a>列出指定环境的包</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda list -name env_name<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="安装包"><a href="#安装包" class="headerlink" title="安装包"></a>安装包</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda install numpy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="指定环境安装包"><a href="#指定环境安装包" class="headerlink" title="指定环境安装包"></a>指定环境安装包</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda install --name env_name numpy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="搜索已安装的包"><a href="#搜索已安装的包" class="headerlink" title="搜索已安装的包"></a>搜索已安装的包</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda search numpy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="导出当前环境信息"><a href="#导出当前环境信息" class="headerlink" title="导出当前环境信息"></a>导出当前环境信息</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda env export &gt; environment.yaml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="导入环境信息"><a href="#导入环境信息" class="headerlink" title="导入环境信息"></a>导入环境信息</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda env create -f environment.yaml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="添加镜像源"><a href="#添加镜像源" class="headerlink" title="添加镜像源"></a>添加镜像源</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda config --add channels https://pypi.tuna.tsinghua.edu.cn/simple<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看镜像源"><a href="#查看镜像源" class="headerlink" title="查看镜像源"></a>查看镜像源</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda config --show-sources<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="删除镜像源"><a href="#删除镜像源" class="headerlink" title="删除镜像源"></a>删除镜像源</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda config --remove channels https://pypi.tuna.tsinghua.edu.cn/simple<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="设置安装时显示源url"><a href="#设置安装时显示源url" class="headerlink" title="设置安装时显示源url"></a>设置安装时显示源url</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda config --set show_channel_urls yes<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看源全部设置"><a href="#查看源全部设置" class="headerlink" title="查看源全部设置"></a>查看源全部设置</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda config --show<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看conda配置文件"><a href="#查看conda配置文件" class="headerlink" title="查看conda配置文件"></a>查看conda配置文件</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cat ~/.condarc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> conda </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>Linux安装 Anaconda</title>
      <link href="/article/31589/"/>
      <url>/article/31589/</url>
      
        <content type="html"><![CDATA[<h2 id="下载安装脚本"><a href="#下载安装脚本" class="headerlink" title="下载安装脚本"></a>下载安装脚本</h2><ul><li>建议新建一个目录保存</li><li>如果下载缓慢，可以先下载至电脑，再上传至服务器，网盘链接：<a href="https://pan.baidu.com/s/1cpsn7ESWOlwvnlkoP7LIfA?pwd=gh76">https://pan.baidu.com/s/1cpsn7ESWOlwvnlkoP7LIfA?pwd=gh76</a></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wget https://repo.anaconda.com/archive/Anaconda3-2020.02-Linux-x86_64.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="执行安装脚本"><a href="#执行安装脚本" class="headerlink" title="执行安装脚本"></a>执行安装脚本</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bash Anaconda3-5.3.1-Linux-x86_64.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>回车确认：</p><p><img src="https://i2.100024.xyz/2022/07/21/qqzg1j.webp" alt="回车确认"></p><p>一直按着回车键，直到出现下图，输入 <code>yes</code>：</p><p><img src="https://i2.100024.xyz/2022/07/21/qqzckr.webp" alt="安装确认"></p><p>修改安装位置（可选），我填了 <code>/opt/anaconda3</code>：</p><p><img src="https://i2.100024.xyz/2022/07/21/qqzf8v.webp" alt="修改安装位置"></p><p>等待安装完成，出现是否初始化，输入 <code>yes</code>：</p><p><img src="https://i2.100024.xyz/2022/07/21/qsqemu.webp" alt="是否初始化"></p><p>最后再执行 <code>source ~/.bashrc</code>，就完成了</p><h2 id="base环境问题"><a href="#base环境问题" class="headerlink" title="base环境问题"></a>base环境问题</h2><p>安装完anaconda后，每次打开Linux系统的终端会自动激活base环境。</p><p>conda配置里面设置取消自动激活base环境：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">conda config --set auto_activate_base false<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="conda命令"><a href="#conda命令" class="headerlink" title="conda命令"></a>conda命令</h2><p>参考：<a href="http://wzspace.cn/article/44489/">http://wzspace.cn/article/44489/</a></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Anaconda </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>CentOS7 防火墙操作命令</title>
      <link href="/article/12774/"/>
      <url>/article/12774/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>没有firewalld请先安装，安装命令：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum install firewalld<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="firewalld基本使用"><a href="#firewalld基本使用" class="headerlink" title="firewalld基本使用"></a>firewalld基本使用</h2><h3 id="检查防火墙状态"><a href="#检查防火墙状态" class="headerlink" title="检查防火墙状态"></a>检查防火墙状态</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl status firewalld<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="启动防火墙"><a href="#启动防火墙" class="headerlink" title="启动防火墙"></a>启动防火墙</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl start firewalld<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl stop firewalld<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="设置开机启用防火墙"><a href="#设置开机启用防火墙" class="headerlink" title="设置开机启用防火墙"></a>设置开机启用防火墙</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl enable firewalld.service<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="设置开机禁用防火墙"><a href="#设置开机禁用防火墙" class="headerlink" title="设置开机禁用防火墙"></a>设置开机禁用防火墙</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl disable firewalld.service<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="firewalld-cmd配置"><a href="#firewalld-cmd配置" class="headerlink" title="firewalld-cmd配置"></a>firewalld-cmd配置</h2><h3 id="查看版本"><a href="#查看版本" class="headerlink" title="查看版本"></a>查看版本</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看帮助"><a href="#查看帮助" class="headerlink" title="查看帮助"></a>查看帮助</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --help<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="检查状态"><a href="#检查状态" class="headerlink" title="检查状态"></a>检查状态</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --state<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看所有打开的端口"><a href="#查看所有打开的端口" class="headerlink" title="查看所有打开的端口"></a>查看所有打开的端口</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --zone=public --list-ports<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="更新防火墙规则"><a href="#更新防火墙规则" class="headerlink" title="更新防火墙规则"></a>更新防火墙规则</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --reload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="更新防火墙规则-x2F-重启服务"><a href="#更新防火墙规则-x2F-重启服务" class="headerlink" title="更新防火墙规则/重启服务"></a>更新防火墙规则/重启服务</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --completely-reload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="开启防火墙端口"><a href="#开启防火墙端口" class="headerlink" title="开启防火墙端口"></a>开启防火墙端口</h3><ul><li>注意：开启或关闭防火墙端口后，更新才能生效</li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --zone=public --add-port=8080/tcp --permanent<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="关闭防火墙端口"><a href="#关闭防火墙端口" class="headerlink" title="关闭防火墙端口"></a>关闭防火墙端口</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --zone=public --remove-port=8080/tcp --permanent<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看端口状态"><a href="#查看端口状态" class="headerlink" title="查看端口状态"></a>查看端口状态</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --zone=public --query-port=8080/tcp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="拒绝所有包"><a href="#拒绝所有包" class="headerlink" title="拒绝所有包"></a>拒绝所有包</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --panic-on<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="取消拒绝状态"><a href="#取消拒绝状态" class="headerlink" title="取消拒绝状态"></a>取消拒绝状态</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --panic-off<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="查看是否拒绝"><a href="#查看是否拒绝" class="headerlink" title="查看是否拒绝"></a>查看是否拒绝</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --query-panic<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="命令详情"><a href="#命令详情" class="headerlink" title="命令详情"></a>命令详情</h3><ul><li>–zone 信任级别<ul><li>drop: 丢弃所有进入的包，而不给出任何响应 </li><li>block: 拒绝所有外部发起的连接，允许内部发起的连接 </li><li>public: 允许指定的进入连接 </li><li>external: 同上，对伪装的进入连接，一般用于路由转发 </li><li>dmz: 允许受限制的进入连接 </li><li>work: 允许受信任的计算机被限制的进入连接，类似 workgroup </li><li>home: 同上，类似 homegroup </li><li>internal: 同上，范围针对所有互联网用户 </li><li>trusted: 信任所有连接</li></ul></li><li>–add-port=8080/tcp 添加端口，格式为：端口/通讯协议</li><li>–permanent 永久生效，没有此参数重启后失效</li></ul><h2 id="配置IP地址伪装"><a href="#配置IP地址伪装" class="headerlink" title="配置IP地址伪装"></a>配置IP地址伪装</h2><h3 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --zone=external --query-masquerade<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="打开"><a href="#打开" class="headerlink" title="打开"></a>打开</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --zone=external --add-masquerade<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="关闭"><a href="#关闭" class="headerlink" title="关闭"></a>关闭</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --zone=external --remove-masquerade<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="端口转发"><a href="#端口转发" class="headerlink" title="端口转发"></a>端口转发</h2><ul><li>打开端口转发，首先打开IP地址伪装</li></ul><h3 id="转发-tcp-8080-端口至-8081"><a href="#转发-tcp-8080-端口至-8081" class="headerlink" title="转发 tcp 8080 端口至 8081"></a>转发 tcp 8080 端口至 8081</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --zone=external --add-forward-port=8080:porto=tcp:toport=8081<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="转发端口数据至另一个IP的相同端口"><a href="#转发端口数据至另一个IP的相同端口" class="headerlink" title="转发端口数据至另一个IP的相同端口"></a>转发端口数据至另一个IP的相同端口</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --zone=external --add-forward-port=8080:porto=tcp:toaddr=192.168.43.122<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="转发8080端口数据至另一个IP的8081端口"><a href="#转发8080端口数据至另一个IP的8081端口" class="headerlink" title="转发8080端口数据至另一个IP的8081端口"></a>转发8080端口数据至另一个IP的8081端口</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --zone=external --add-forward-port=8080:porto=tcp:toport=8081:toaddr=192.168.43.112<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> firewall </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>利用多线程加速下载文件（Python）</title>
      <link href="/article/12991/"/>
      <url>/article/12991/</url>
      
        <content type="html"><![CDATA[<h2 id="需要的库"><a href="#需要的库" class="headerlink" title="需要的库"></a>需要的库</h2><pre class="line-numbers language-txt" data-language="txt"><code class="language-txt">tqdmrequestsretrysignalmultitasking<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="完整源码"><a href="#完整源码" class="headerlink" title="完整源码"></a>完整源码</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"># import timeimport jsonfrom tqdm import tqdmfrom typing import List, Tupleimport osimport requestsfrom retry import retryimport signalimport multitaskingsignal.signal(signal.SIGINT, multitasking.killall)class Download:    def __init__(self):        """        多线程下载文件        """        self.__file_size = None     # 文件大小/单位b        self.__file_url = None  # 文件路径        self.__MB = pow(1024, 2)  # 1MB == 1024^2B        self.savePath = "D:\\AppData\\Download"  # 保存路径        self.__headers = {            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) '                          'Chrome/99.0.4844.74 Safari/537.36 Edg/99.0.1150.46'        }        self.__split_max = 20  # 分块数        self.__file_min_mb = 10  # 每块最小内存        self.__retry_tries = 3  # 每次连接失败重试次数    @property    def split_max(self):        """        最大线程数        :return:        """        return self.__split_max    @split_max.setter    def split_max(self, value):        """        设置最大线程数        :param value:        :return:        """        if isinstance(value, int) or value.isdigit():            self.__split_max = int(value)        else:            raise ValueError("split_max value not is int")    def download(self, file_url: str, file_name: str):        """        下载文件        :param file_url: 文件链接        :param file_name: 文件保存名        :return:        """        # 如果保存目录不存在，创建        if not os.path.exists(self.savePath):            os.makedirs(self.savePath)        self.__file_url = file_url        # 获取文件大小/单位b        self.__file_size = self.__get_file_size()        self.__download(file_name=file_name)    def __download(self, file_name):        @retry(tries=self.__retry_tries)        @multitasking.task        def split_download(start, ending):            """            分块下载            :param start: 开头            :param ending: 结尾            :return:            """            # 拷贝，避开线程之间的影响            part_headers = self.__headers.copy()            # 分段下载的核心/设置下载的文件部分            part_headers['Range'] = 'bytes={start}-{ending}'.format(start=start, ending=ending)            # 发起请求并获取响应（流式）            response = session.get(self.__file_url, headers=part_headers, stream=True)            # 每次读取的流式响应大小/128b            data_size = 128            # 暂存已获取的数据            datas = []            for data in response.iter_content(chunk_size=data_size):                # 暂存获取的响应                datas.append(data)                # 更新进度条                download_tqdm.update(data_size)            file.seek(start)            for data in datas:                file.write(data)            # 释放已写入的资源            del datas        # session保持浏览器状态        session = requests.Session()        # 打开文件        file = open(os.path.join(self.savePath, file_name), "wb")        # 创建进度条        download_tqdm = tqdm(total=self.__file_size, desc=f'下载文件[{file_name}]')        # 开始分线下载        for part in self.__split_list():            split_download(part[0], part[1])        # 等待全部线程结束        multitasking.wait_for_tasks()        file.close()        download_tqdm.close()    def __split_list(self) -&gt; List[Tuple[int, int]]:        """        获取分块列表        :return:        """        # 获取文件大小/单位mb        file_size = self.__file_size / self.__MB        # 判断文件大小是否小于最小分块内存        if file_size &lt; self.__file_min_mb:            return [(0, self.__file_size)]        # 获取实际线程数        split_sum = round(file_size / self.__file_min_mb)        split_sum = self.__split_max if split_sum &gt; self.__split_max else split_sum        # 获取每块下载的内存大小        split_size = self.__file_size // split_sum        # print("file_size:", self.__file_size)        # print("file_MB:", file_size)        # print("split_sum:", split_sum)        # print("split_size:", split_size)        # print("split_size_mb:", split_size / self.__MB)        # 分块列表        split_list = []        # 获取分块列表        for start in range(0, self.__file_size, split_size):            if start + 2 * split_size &gt; self.__file_size:                ending = self.__file_size                split_list.append((start, ending))                break            else:                ending = start + split_size                split_list.append((start, ending))        return split_list    def __get_file_size(self):        """        获取文件大小/单位b        :return:        """        response = requests.head(self.__file_url)        file_size = response.headers.get('Content-Length')        # print(json.dumps(dict(response.headers), indent=4, ensure_ascii=False))        if file_size is None:            raise ValueError('该文件不支持多线程分段下载！')        return eval(file_size)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">if __name__ == '__main__':    # Anaconda3    # 文件下载路径    url = "https://repo.anaconda.com/archive/Anaconda3-2021.11-Windows-x86_64.exe"    # 文件保存名字    file_name = "Anaconda3-2021.11-Windows-x86_64.exe"    # 实例化    d = Download()    # 设置最大线程数    # d.split_max = 36    d.download(file_url=url, file_name=file_name)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>1、使用时更改文件下载路径和文件保存的名字</p><p>2、文件下载后默认保存在”D:\AppData\Download”下（可以自行更改）</p><p>3、下载速度和网速、线程数相关，小于10M的文件单线程下载（可以自行更改）</p><p>4、当网速不佳时，开启过多的线程反而会比正常下载更慢</p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 多线程 </tag>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>本地连接服务器远程写代码</title>
      <link href="/article/52120/"/>
      <url>/article/52120/</url>
      
        <content type="html"><![CDATA[<p>服务器写代码对我来说是一件痛苦又无奈的事，但好在还能解决，我记录了几种能够远程写代码的方法</p><h2 id="VsCode"><a href="#VsCode" class="headerlink" title="VsCode"></a>VsCode</h2><p>VSCode下载安装很简单，前往 <a href="https://code.visualstudio.com/">官网</a></p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>打开VSCode，依次点击左侧的远程资源管理器 -&gt; SSH TARGETS -&gt; Add New（即+号）</p><p><img src="http://data.wzspace.cn/image/blog/52120/ljSSH.png" alt="连接SSH"></p><p>在弹出的命令框输入，<code>ssh user@ip</code>，我的是 <code>ssh root@47.108.238.200</code>，然后回车即可</p><p>选择保存位置，直接点击第一个即可</p><p><img src="http://data.wzspace.cn/image/blog/52120/xzbcwz.png" alt="选择保存位置"></p><p>就可以在左侧看到已经配置的服务器</p><p><img src="http://data.wzspace.cn/image/blog/52120/ypzdfwq.png" alt="已配置服务器"></p><h3 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h3><p>右键刚才配置的服务器，选择 <em>Connect to Host in Current Windows</em></p><p><img src="http://data.wzspace.cn/image/blog/52120/ljxz.png" alt="连接选择"></p><p>然后输入密码回车</p><p><img src="http://data.wzspace.cn/image/blog/52120/srmm.png" alt="输入密码"></p><p>显示连接成功，就可以直接打开文件，和在本地操作一样，不过管理的是服务器的资源</p><h3 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h3><p><img src="http://data.wzspace.cn/image/blog/52120/dkwj.png" alt="打开文件"></p><p><img src="http://data.wzspace.cn/image/blog/52120/xzwjj.png" alt="选择文件夹"></p><p>再次输入密码即可，你就可以自由更改了</p><p><img src="http://data.wzspace.cn/image/blog/52120/bjwjnr.png" alt="编辑文件内容"></p><h2 id="Pycharm"><a href="#Pycharm" class="headerlink" title="Pycharm"></a>Pycharm</h2><p>Pycharm下载安装很简单，前往 <a href="https://www.jetbrains.com/pycharm/">官网</a></p><p>我这里使用了中文插件，先安装中文插件便于进行</p><h3 id="配置SSH"><a href="#配置SSH" class="headerlink" title="配置SSH"></a>配置SSH</h3><p>进入Pycharm，因为我这里不写Python代码，所以没有新建项目，直接右键文件夹使用Pycharm打开即可，当然，新建项目也没毛病</p><p>依次点击 工具 -&gt; 部署 -&gt; 配置 -&gt; 左上角添加(+) -&gt; SFTP，填写名称确定</p><p><img src="http://data.wzspace.cn/image/blog/52120/xjSFTP.png" alt="新建SFTP"></p><p><img src="http://data.wzspace.cn/image/blog/52120/SFTP.png" alt="SFTP"></p><p>点击SSH配置最右边的小按键，然后点击左上角添加，输入你的主机、用户和密码，测试连接，成功连接后确定即可</p><p><img src="http://data.wzspace.cn/image/blog/52120/SSH.png" alt="SSH"></p><h3 id="配置SFTP"><a href="#配置SFTP" class="headerlink" title="配置SFTP"></a>配置SFTP</h3><p>配置你的根路径，即你要操作的根目录</p><p><img src="http://data.wzspace.cn/image/blog/52120/SFTPglj.png" alt="SFTP根路径"></p><p>选择你的映射路径，即本项目与远程项目之间的映射，上传文件时会将本项目目录下的文件对应上传到远程项目对应的目录，选择后记得点击添加新映射哦</p><p><img src="http://data.wzspace.cn/image/blog/52120/SFTPyslj.png" alt="SFTP映射路径"></p><p>排除的路径，即你全部上传或下载文件时不想上传或下载的文件，可自定义</p><h3 id="上传文件"><a href="#上传文件" class="headerlink" title="上传文件"></a>上传文件</h3><p>点击左侧的文件或者文件夹，然后点击 工具 -&gt; 部署，选择上传或下载即可</p><p><img src="http://data.wzspace.cn/image/blog/52120/scwj.png" alt="上传文件"></p><p>查看文件，上传成功</p><p><img src="http://data.wzspace.cn/image/blog/52120/ckwj.png" alt="查看文件"></p><p>可以开启自动上传，个人需求而定</p>]]></content>
      
      
      <categories>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> VSCode </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>使用宝塔面板部署hexo博客</title>
      <link href="/article/52021/"/>
      <url>/article/52021/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol><li>本文使用宝塔面板辅助部署，安装参考 <a href="/article/52020/">宝塔面板安装和基本配置</a></li><li>所有关于安装hexo的插件的命令均在网站根目录下执行</li><li>每次更改配置过后都需要重新生成静态文件才能看到更改后的效果</li><li>因为hexo是静态文件，在重新生成静态文件后需要删除浏览器缓存在重新刷新才能看到更改的页面</li></ol><h2 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a>安装nodejs</h2><h3 id="安装nodejs版本管理器"><a href="#安装nodejs版本管理器" class="headerlink" title="安装nodejs版本管理器"></a>安装nodejs版本管理器</h3><p>进入宝塔面板，点击 网站 -&gt; Node项目 ,出现以下界面安装即可</p><p><img src="http://data.wzspace.cn/image/blog/52021/aznodejsbbglq.png" alt="安装nodejs版本管理器"></p><h3 id="安装nodejs-1"><a href="#安装nodejs-1" class="headerlink" title="安装nodejs"></a>安装nodejs</h3><p>点击 添加Node项目，安装nodejs，我选择的是 v14.17.6 稳定版</p><p><img src="http://data.wzspace.cn/image/blog/52021/nodejsbb.png" alt="nodejs版本"></p><p>安装完成后，nodejs在目录 <em>/www/server/nodejs/{version}/</em> ，编辑文件 <em>/etc/profile</em></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">vim /etc/profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在最后一行添加，版本号换成自己的</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">export PATH=$PATH:/www/server/nodejs/v14.17.6/bin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>如何使配置文件生效</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">source /etc/profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="部署hexo"><a href="#部署hexo" class="headerlink" title="部署hexo"></a>部署hexo</h2><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><p>打开宝塔 -&gt; 文件，在 <em>/www/wwwroot/</em> 目录下新建站点目录，注意 <em>wzspace.cn</em> 是你的域名</p><p><img src="http://data.wzspace.cn/image/blog/52021/xjml.png" alt="新建目录"></p><p>进入该目录</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cd /www/wwwroot/wzspace.cn/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>创建完成后，使用npm安装</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install hexo -g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>设置hexo环境变量，版本号换成自己的</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ln -s /www/server/nodejs/v14.17.6/lib/node_modules/hexo/bin/hexo /usr/bin/hexo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>进行初始化</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>生成静态文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo g<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="新建网站"><a href="#新建网站" class="headerlink" title="新建网站"></a>新建网站</h3><p>打开宝塔 -&gt; 网站 -&gt; PHP项目：</p><p><img src="http://data.wzspace.cn/image/blog/52021/btwzPHPxm.png" alt="宝塔网站PHP项目"></p><p>添加站点：</p><p><img src="http://data.wzspace.cn/image/blog/52021/tjzd.png" alt="添加站点"></p><p>设置网站运行目录，点击保存，如下：</p><p><img src="http://data.wzspace.cn/image/blog/52021/szwzyxml.png" alt="设置网站运行目录"></p><p>访问效果如下：</p><p><img src="http://data.wzspace.cn/image/blog/52021/fwxg.png" alt="访问效果"></p><h2 id="更换主题"><a href="#更换主题" class="headerlink" title="更换主题"></a>更换主题</h2><p>本次使用的主题来源：<a href="https://github.com/blinkfox/hexo-theme-matery/">https://github.com/blinkfox/hexo-theme-matery/</a></p><h3 id="下载主题"><a href="#下载主题" class="headerlink" title="下载主题"></a>下载主题</h3><p>进入网站目录下的 <em>themes/</em> 目录，下载主题：</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cd themesgit clone https://github.com/blinkfox/hexo-theme-matery.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>更改网站目录下的 _config.yml 文件中的theme的值为：hexo-theme-matery</p><p>主题配置详情：<a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md">https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md</a></p><p>Hexo配置详情：<br><a href="https://hexo.io/zh-cn/docs/configuration">https://hexo.io/zh-cn/docs/configuration</a></p><h2 id="个人使用记录"><a href="#个人使用记录" class="headerlink" title="个人使用记录"></a>个人使用记录</h2><h3 id="数字链接"><a href="#数字链接" class="headerlink" title="数字链接"></a>数字链接</h3><p>Hexo默认使用的文章永久链接格式是：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">year/:month/:day/:title/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这种链接格式不仅容易出现错误，而且可读性很差，abbrlink插件可以很好的解决这个问题，插件项目地址：<a href="https://github.com/rozbo/hexo-abbrlink">https://github.com/rozbo/hexo-abbrlink</a></p><p>安装abbrlink插件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npm install hexo-abbrlink --save<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在网站根目录下更改站点配置文件_config.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">permalink: p/:abbrlink/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>在网站根目录下添加站点配置文件_config.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">abbrlink:  alg: crc16 #support crc16(default) and crc32  rep: dec   #support dec(default) and hex<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>重新删除缓存，生成静态文件</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hexo cleanhexo g -d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>就可以在网站目录下的 <em>/source/_post/{post-name}.md</em> 文件中就能看到：</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">abbrlink: 52020<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>更改 abbrlink 的值就可以自定义文章链接，更改过后记得重新生成静态文件哦</p><h3 id="更改页脚"><a href="#更改页脚" class="headerlink" title="更改页脚"></a>更改页脚</h3><p>默认的页脚格式可能没有达到你想要的效果，你可以自定义页脚模板文件，在主题目录下的 <em>layout/_partial/footer.ejs</em></p><ol><li>运行天数提醒精确到秒，更改相对应的 &lt;script&gt; 标签下的JavaScript代码如下，其中字符串内的内容可自行更改：</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sitetime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> Loading ...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">        <span class="token keyword">var</span> <span class="token function-variable function">calcSiteTime</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">var</span> seconds <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> minutes <span class="token operator">=</span> seconds <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> hours <span class="token operator">=</span> minutes <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> days <span class="token operator">=</span> hours <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> years <span class="token operator">=</span> days <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> today <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> startYear <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.year %&gt;"</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> startMonth <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.month %&gt;"</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> startDate <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.date %&gt;"</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> startHour <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.hour %&gt;"</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> startMinute <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.minute %&gt;"</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> startSecond <span class="token operator">=</span> <span class="token string">"&lt;%- theme.time.second %&gt;"</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> todayYear <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> todayMonth <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> todayDate <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> todayHour <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> todayMinute <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> todaySecond <span class="token operator">=</span> today<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> t1 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span>startYear<span class="token punctuation">,</span> startMonth<span class="token punctuation">,</span> startDate<span class="token punctuation">,</span> startHour<span class="token punctuation">,</span> startMinute<span class="token punctuation">,</span> startSecond<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> t2 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token constant">UTC</span><span class="token punctuation">(</span>todayYear<span class="token punctuation">,</span> todayMonth<span class="token punctuation">,</span> todayDate<span class="token punctuation">,</span> todayHour<span class="token punctuation">,</span> todayMinute<span class="token punctuation">,</span> todaySecond<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> diff <span class="token operator">=</span> t2 <span class="token operator">-</span> t1<span class="token punctuation">;</span>            <span class="token keyword">var</span> diffYears <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> years<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> diffDays <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> days<span class="token punctuation">)</span> <span class="token operator">-</span> diffYears <span class="token operator">*</span> <span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> diffHours <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> hours<span class="token punctuation">)</span> <span class="token operator">-</span> diffDays <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">-</span> diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> diffMinutes <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> minutes<span class="token punctuation">)</span> <span class="token operator">-</span> diffHours <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">-</span> diffDays <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">-</span> diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> diffSeconds <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>diff <span class="token operator">/</span> seconds<span class="token punctuation">)</span> <span class="token operator">-</span> diffMinutes <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">-</span> diffHours <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">-</span> diffDays <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">-</span> diffYears <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//var diffHours = 7;var diffMinutes = 7;var diffSeconds = 7;</span>            <span class="token comment">// 区分是否有年份.</span>            <span class="token keyword">var</span> language <span class="token operator">=</span> <span class="token string">'&lt;%- config.language %&gt;'</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>startYear <span class="token operator">===</span> <span class="token function">String</span><span class="token punctuation">(</span>todayYear<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"year"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> todayYear<span class="token punctuation">;</span>                <span class="token keyword">var</span> daysTip <span class="token operator">=</span> <span class="token string">'This site has been running for '</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' days'</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>language <span class="token operator">===</span> <span class="token string">'zh-CN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    daysTip <span class="token operator">=</span> <span class="token string">'&lt;%- config.author %&gt;已摆烂 '</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' 天'</span> <span class="token operator">+</span> diffHours <span class="token operator">+</span> <span class="token string">'小时'</span> <span class="token operator">+</span> diffMinutes <span class="token operator">+</span> <span class="token string">'分钟'</span> <span class="token operator">+</span> diffSeconds <span class="token operator">+</span> <span class="token string">'秒'</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>language <span class="token operator">===</span> <span class="token string">'zh-HK'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    daysTip <span class="token operator">=</span> <span class="token string">'&lt;%- config.author %&gt;已擺爛 '</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' 天'</span> <span class="token operator">+</span> diffHours <span class="token operator">+</span> <span class="token string">'小時'</span> <span class="token operator">+</span> diffMinutes <span class="token operator">+</span> <span class="token string">'分鐘'</span> <span class="token operator">+</span> diffSeconds <span class="token operator">+</span> <span class="token string">'秒'</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"sitetime"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> daysTip<span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"year"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> startYear <span class="token operator">+</span> <span class="token string">" - "</span> <span class="token operator">+</span> todayYear<span class="token punctuation">;</span>                <span class="token keyword">var</span> yearsAndDaysTip <span class="token operator">=</span> <span class="token string">'This site has been running for '</span> <span class="token operator">+</span> diffYears <span class="token operator">+</span> <span class="token string">' years and '</span>                    <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' days'</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>language <span class="token operator">===</span> <span class="token string">'zh-CN'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    yearsAndDaysTip <span class="token operator">=</span> <span class="token string">'&lt;%- config.author %&gt;已摆烂 '</span> <span class="token operator">+</span> diffYears <span class="token operator">+</span> <span class="token string">' 年 '</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' 天'</span> <span class="token operator">+</span> diffHours <span class="token operator">+</span> <span class="token string">'小时'</span> <span class="token operator">+</span> diffMinutes <span class="token operator">+</span> <span class="token string">'分钟'</span> <span class="token operator">+</span> diffSeconds <span class="token operator">+</span> <span class="token string">'秒'</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>language <span class="token operator">===</span> <span class="token string">'zh-HK'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    yearsAndDaysTip <span class="token operator">=</span> <span class="token string">'&lt;%- config.author %&gt;已擺爛 '</span> <span class="token operator">+</span> diffYears <span class="token operator">+</span> <span class="token string">' 年 '</span> <span class="token operator">+</span> diffDays <span class="token operator">+</span> <span class="token string">' 天'</span> <span class="token operator">+</span> diffHours <span class="token operator">+</span> <span class="token string">'小時'</span> <span class="token operator">+</span> diffMinutes <span class="token operator">+</span> <span class="token string">'分鐘'</span> <span class="token operator">+</span> diffSeconds <span class="token operator">+</span> <span class="token string">'秒'</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>                document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"sitetime"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> yearsAndDaysTip<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment">//calcSiteTime();</span>        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token string">"calcSiteTime()"</span><span class="token punctuation">,</span><span class="token number">250</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>更改版权信息模板，懂一点HTML代码的可自行更改</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">Copyright<span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="©">&amp;copy;</span>&lt;% if (theme.time.year !== new Date().getFullYear()) { %&gt;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>year<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>&lt;%- theme.time.year %&gt;-&lt;%- new Date().getFullYear() %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>&lt;% } else { %&gt;    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>year<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>&lt;%- theme.time.year %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>&lt;% } %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;%- url_for(<span class="token punctuation">'</span>/about<span class="token punctuation">'</span>) %&gt;<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>&lt;%- config.author %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>|<span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>Powered by<span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;%- url_for(<span class="token punctuation">'</span>/<span class="token punctuation">'</span>) %&gt;<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>&lt;%- config.title %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="更改背景颜色"><a href="#更改背景颜色" class="headerlink" title="更改背景颜色"></a>更改背景颜色</h3><p>这个在主题配置详情已有说明，可以在那个基础上加上透明度，亲测，有点意思</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.bg-color</span> <span class="token punctuation">{</span>    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right<span class="token punctuation">,</span> #228B22 0%<span class="token punctuation">,</span> #8A2BE2 100%<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.9<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="修改模板"><a href="#修改模板" class="headerlink" title="修改模板"></a>修改模板</h3><p>网站根目录下的 <em>scaffolds/</em> 目录内保存着模板，其中post.md是文章模板，因为在新建文章时一般要配置一些初始设置，可以加在模板中，修改如下：</p><pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">---title: {{ title }}date: {{ date }}img: top: falsehide: falsecover: falsecoverImg: password: toc: truemathjax: falsesummary: categories: tags:keywords: ---<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>变量详情：<a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md#%E6%96%87%E7%AB%A0-front-matter-%E4%BB%8B%E7%BB%8D">https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md#%E6%96%87%E7%AB%A0-front-matter-%E4%BB%8B%E7%BB%8D</a></p><h3 id="添加评论"><a href="#添加评论" class="headerlink" title="添加评论"></a>添加评论</h3><p>前往 <a href="https://leancloud.app/">LeanCloud官网</a> 注册账号，创建应用：</p><p><img src="http://data.wzspace.cn/image/blog/52021/plcjyy.png" alt="评论创建应用"></p><p>打开应用设置 -&gt; 应用凭证：</p><p><img src="http://data.wzspace.cn/image/blog/52021/yypz.png" alt="应用凭证"></p><p>复制AppID，AppKey和REST API 服务器地址，配置主题目录下的配置文件：</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"># The configuration of the Valine comment module is not activated by default.# To use it, activate the configuration item and set appId and appKey.# Valine 评论模块的配置，默认为不激活，如要使用，就请激活该配置项，并设置 appId 和 appKey.valine:  enable: true  appId: 6uAzMWIBFLe06rxy8cUFfpQs-MdYXbMMI  # 必填  appKey: 2rmetdma3FQoLdhgymHWI5FX  # 必填  serverURLs: https://6uazmwib.api.lncldglobal.com  # 必填 https://你的api  notify: false  verify: false  visitor: false  # 文章阅读统计  lang: zh-CN  highlight: true  # 代码高亮  avatarForce: false  # 每次访问强制拉取最新的评论列表头像  recordIP: false  # 是否记录评论者IP  enableQQ: false  # 是否启用昵称框自动获取QQ昵称和QQ头像  requiredFields: ['nick', 'mail']  # 设置必填项  mathJax: false  # 数学公式功能  meta: ['nick','mail','link']  js: https://cdn.jsdelivr.net/gh/HCLonely/Valine@latest/dist/Valine.min.js  avatar: 'wavatar' # Gravatar style : mm/identicon/monsterid/wavatar/retro/hide  pageSize: 10  placeholder: '在这里写下你想说的话哦~' # Comment Box placeholder  background: /medias/comment_bg.png  coolpushkey:   emojiCDN:   # 设置表情包CDN, https://valine.js.org/emoji.html  emojiMaps: null<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="评论添加邮箱提醒"><a href="#评论添加邮箱提醒" class="headerlink" title="评论添加邮箱提醒"></a>评论添加邮箱提醒</h3><p>来源：<a href="https://github.com/DesertsP/Valine-Admin">https://github.com/DesertsP/Valine-Admin</a></p><p>先看结果：</p><p><img src="http://data.wzspace.cn/image/blog/52021/yxhf.png" alt="邮箱回复"></p><h4 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h4><p>前往 <a href="https://leancloud.app/">LeanCloud官网</a>，打开刚才创建的应用 -&gt; 云引擎 -&gt; WEB -&gt; 设置，添加环境变量：</p><p><img src="http://data.wzspace.cn/image/blog/52021/yyhjbl.png" alt="应用环境变量"></p><p>变量解释：<a href="https://github.com/DesertsP/Valine-Admin#%E4%BA%91%E5%BC%95%E6%93%8E%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2">https://github.com/DesertsP/Valine-Admin#%E4%BA%91%E5%BC%95%E6%93%8E%E4%B8%80%E9%94%AE%E9%83%A8%E7%BD%B2</a></p><h4 id="部署项目"><a href="#部署项目" class="headerlink" title="部署项目"></a>部署项目</h4><p>打开云引擎 -&gt; WEB -&gt; 部署 -&gt; 部署项目 -&gt; Git部署：</p><p><img src="http://data.wzspace.cn/image/blog/52021/bsxm.png" alt="部署项目"></p><p>配置Git，复制 <a href="https://github.com/DesertsP/Valine-Admin.git%EF%BC%8C%E7%B2%98%E8%B4%B4%E4%BF%9D%E5%AD%98">https://github.com/DesertsP/Valine-Admin.git，粘贴保存</a></p><p><img src="http://data.wzspace.cn/image/blog/52021/pzGit.png" alt="配置Git"></p><p>再次点击部署项目，划到最底，点击部署，等待部署完成，部署完成，部署完成后发送怕</p><p><img src="http://data.wzspace.cn/image/blog/52021/bsrz.png" alt="部署日志"></p><h4 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h4><p>打开设置 -&gt; 域名绑定，绑定你的域名，如何在云服务器控制台进行云解析，解析到下图中推荐DNS配置的CNAME域名下</p><p><img src="http://data.wzspace.cn/image/blog/52021/ymbd.png" alt="域名绑定"></p><h4 id="更改邮箱模板"><a href="#更改邮箱模板" class="headerlink" title="更改邮箱模板"></a>更改邮箱模板</h4><p>可选，彩虹模板，先看效果</p><p><img src="http://data.wzspace.cn/image/blog/52021/yxfsxg.png" alt="邮箱发送效果"></p><p>在配置环境变量那里加上邮箱模板配置结果如下：</p><p><img src="http://data.wzspace.cn/image/blog/52021/yxmbhjbl.png" alt="邮箱模板"></p><p>MAIL_SUBJECT：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">${PARENT_NICK}同学，您曾在『${SITE_NAME}』上的留言有新回复啦~<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>MAIL_SUBJECT_ADMIN：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">${NICK}同学在您的『${SITE_NAME}』留言啦~<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>MAIL_TEMPLATE：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 10px 10px 10px<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>13px<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #555555<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 666px<span class="token punctuation">;</span><span class="token property">font-family</span><span class="token punctuation">:</span><span class="token string">'Century Gothic'</span><span class="token punctuation">,</span><span class="token string">'Trebuchet MS'</span><span class="token punctuation">,</span><span class="token string">'Hiragino Sans GB'</span><span class="token punctuation">,</span>微软雅黑<span class="token punctuation">,</span><span class="token string">'Microsoft Yahei'</span><span class="token punctuation">,</span>Tahoma<span class="token punctuation">,</span>Helvetica<span class="token punctuation">,</span>Arial<span class="token punctuation">,</span><span class="token string">'SimSun'</span><span class="token punctuation">,</span>sans-serif<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>50px auto<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid #eee<span class="token punctuation">;</span><span class="token property">max-width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span> #ffffff <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">,</span>#fff<span class="token punctuation">,</span>#fff 1.125rem<span class="token punctuation">,</span>transparent 1.125rem<span class="token punctuation">,</span>transparent 2.25rem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 1px 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.15<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span>#49BDAD<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>#ffffff<span class="token punctuation">;</span><span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 10px 0 0<span class="token punctuation">;</span><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">-moz-linear-gradient</span><span class="token punctuation">(</span>0deg<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>67<span class="token punctuation">,</span> 198<span class="token punctuation">,</span> 184<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 209<span class="token punctuation">,</span> 244<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">-webkit-linear-gradient</span><span class="token punctuation">(</span>0deg<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>67<span class="token punctuation">,</span> 198<span class="token punctuation">,</span> 184<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 209<span class="token punctuation">,</span> 244<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 66px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span>15px<span class="token punctuation">;</span><span class="token property">word-break</span><span class="token punctuation">:</span>break-all<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 23px 32px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0%<span class="token punctuation">,</span>100%<span class="token punctuation">,</span>.4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 10px 0 0<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>            您在            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${SITE_URL}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>${SITE_NAME}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>            上的留言有新回复啦！        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span>40px auto<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>90%</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>            ${PARENT_NICK} 同学，您曾在            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span>#12addb</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${SITE_URL}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>${SITE_NAME}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>            上留言：        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> #fafafa <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">,</span>#fff<span class="token punctuation">,</span>#fff 1.125rem<span class="token punctuation">,</span>transparent 1.125rem<span class="token punctuation">,</span>transparent 2.25rem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 2px 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.15<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>20px 0px<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span>15px<span class="token punctuation">;</span><span class="token property">border-radius</span><span class="token punctuation">:</span>5px<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>14px<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>#555555<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>            ${PARENT_COMMENT}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>${NICK} 给您的回复如下：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> #fafafa <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">,</span>#fff<span class="token punctuation">,</span>#fff 1.125rem<span class="token punctuation">,</span>transparent 1.125rem<span class="token punctuation">,</span>transparent 2.25rem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 2px 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.15<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>20px 0px<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span>15px<span class="token punctuation">;</span><span class="token property">border-radius</span><span class="token punctuation">:</span>5px<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>14px<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>#555555<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>            ${COMMENT}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>            您可以点击            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span>#12addb</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${POST_URL}#comments<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>查看回复的完整內容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>            ，欢迎再次光临            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span>#12addb</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${SITE_URL}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span> ${SITE_NAME}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>            。        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">            <span class="token selector">a:link</span><span class="token punctuation">{</span>                <span class="token property">text-decoration</span><span class="token punctuation">:</span>none            <span class="token punctuation">}</span>            <span class="token selector">a:visited</span><span class="token punctuation">{</span>                <span class="token property">text-decoration</span><span class="token punctuation">:</span>none            <span class="token punctuation">}</span>            <span class="token selector">a:hover</span><span class="token punctuation">{</span>                <span class="token property">text-decoration</span><span class="token punctuation">:</span>none            <span class="token punctuation">}</span>            <span class="token selector">a:active</span><span class="token punctuation">{</span>                <span class="token property">text-decoration</span><span class="token punctuation">:</span>none            <span class="token punctuation">}</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>MAIL_TEMPLATE_ADMIN：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 10px 10px 10px<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>13px<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #555555<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 666px<span class="token punctuation">;</span><span class="token property">font-family</span><span class="token punctuation">:</span><span class="token string">'Century Gothic'</span><span class="token punctuation">,</span><span class="token string">'Trebuchet MS'</span><span class="token punctuation">,</span><span class="token string">'Hiragino Sans GB'</span><span class="token punctuation">,</span>微软雅黑<span class="token punctuation">,</span><span class="token string">'Microsoft Yahei'</span><span class="token punctuation">,</span>Tahoma<span class="token punctuation">,</span>Helvetica<span class="token punctuation">,</span>Arial<span class="token punctuation">,</span><span class="token string">'SimSun'</span><span class="token punctuation">,</span>sans-serif<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>50px auto<span class="token punctuation">;</span><span class="token property">border</span><span class="token punctuation">:</span>1px solid #eee<span class="token punctuation">;</span><span class="token property">max-width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span> #ffffff <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">,</span>#fff<span class="token punctuation">,</span>#fff 1.125rem<span class="token punctuation">,</span>transparent 1.125rem<span class="token punctuation">,</span>transparent 2.25rem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 1px 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.15<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span>#49BDAD<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>#ffffff<span class="token punctuation">;</span><span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 10px 0 0<span class="token punctuation">;</span><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">-moz-linear-gradient</span><span class="token punctuation">(</span>0deg<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>67<span class="token punctuation">,</span> 198<span class="token punctuation">,</span> 184<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 209<span class="token punctuation">,</span> 244<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">-webkit-linear-gradient</span><span class="token punctuation">(</span>0deg<span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>67<span class="token punctuation">,</span> 198<span class="token punctuation">,</span> 184<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">rgb</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 209<span class="token punctuation">,</span> 244<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 66px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">font-size</span><span class="token punctuation">:</span>15px<span class="token punctuation">;</span><span class="token property">word-break</span><span class="token punctuation">:</span>break-all<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span> 23px 32px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span><span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">hsla</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span>0%<span class="token punctuation">,</span>100%<span class="token punctuation">,</span>.4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">border-radius</span><span class="token punctuation">:</span> 10px 10px 0 0<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>            您的            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${SITE_URL}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>${SITE_NAME}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>            上有新留言啦！        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span>40px auto<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span>90%</span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>            ${NICK} 同学，在您的            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span>#12addb</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${SITE_URL}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>${SITE_NAME}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>            上留言：        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">background</span><span class="token punctuation">:</span> #fafafa <span class="token function">repeating-linear-gradient</span><span class="token punctuation">(</span>-45deg<span class="token punctuation">,</span>#fff<span class="token punctuation">,</span>#fff 1.125rem<span class="token punctuation">,</span>transparent 1.125rem<span class="token punctuation">,</span>transparent 2.25rem<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 2px 5px <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.15<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span>20px 0px<span class="token punctuation">;</span><span class="token property">padding</span><span class="token punctuation">:</span>15px<span class="token punctuation">;</span><span class="token property">border-radius</span><span class="token punctuation">:</span>5px<span class="token punctuation">;</span><span class="token property">font-size</span><span class="token punctuation">:</span>14px<span class="token punctuation">;</span><span class="token property">color</span><span class="token punctuation">:</span>#555555<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">&gt;</span></span>            ${COMMENT}        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>            您可以点击            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">text-decoration</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token property">color</span><span class="token punctuation">:</span>#12addb</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>${POST_URL}#comments<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>查看完整內容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>            。        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">            <span class="token selector">a:link</span><span class="token punctuation">{</span>                <span class="token property">text-decoration</span><span class="token punctuation">:</span>none            <span class="token punctuation">}</span>            <span class="token selector">a:visited</span><span class="token punctuation">{</span>                <span class="token property">text-decoration</span><span class="token punctuation">:</span>none            <span class="token punctuation">}</span>            <span class="token selector">a:hover</span><span class="token punctuation">{</span>                <span class="token property">text-decoration</span><span class="token punctuation">:</span>none            <span class="token punctuation">}</span>            <span class="token selector">a:active</span><span class="token punctuation">{</span>                <span class="token property">text-decoration</span><span class="token punctuation">:</span>none            <span class="token punctuation">}</span>        </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>可用参数配置，有HTML基础的也可以自行发挥</p><table><thead><tr><th align="left">模板变量</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">SITE_NAME</td><td align="left">博客名称</td></tr><tr><td align="left">SITE_URL</td><td align="left">博客首页地址</td></tr><tr><td align="left">POST_URL</td><td align="left">文章地址（完整路径）</td></tr><tr><td align="left">PARENT_NICK</td><td align="left">收件人昵称（被@者，父级评论人）</td></tr><tr><td align="left">PARENT_COMMENT</td><td align="left">父级评论内容</td></tr><tr><td align="left">NICK</td><td align="left">新评论者昵称</td></tr><tr><td align="left">COMMENT</td><td align="left">新评论内容</td></tr></tbody></table><h3 id="留言板问题"><a href="#留言板问题" class="headerlink" title="留言板问题"></a>留言板问题</h3><p>这个主题的留言板我在使用时无法评论也无法显示，增加评论后只显示一个黑框，后来也尝试了很多中改法，发现这是因为导入了其他js文件引起的阻塞（猜测），在主题文件夹下的 <em>layout/</em> 文件夹下，<em>contact.ejs</em> 文件即留言板的模板文件，默认的模板文件在开头导入了以下文件：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/style.css<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/css/barrager.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/libs/valine/av-min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/libs/jquery/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/js/jquery.barrager.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>我也不知道是哪一个的问题，导入的js文件内容太多，没有深究，将导入文件的代码删除后就不会引起阻塞了，然后在最下面的“其他评论card”卡片下增加代码：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">&lt;% if (theme.valine &amp;&amp; theme.valine.enable) { %&gt;&lt;%- partial('_partial/valine') %&gt;&lt;% } %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>最后就可以正常评论了，因为我用的是valine评论系统，所以增加此代码，但上面的留言板不能使用还占位置，鉴于此，我把它删了，最后修改的代码如下：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">&lt;%- partial('_partial/bg-cover') %&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>contact<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container chip-container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card-content<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tag-title center-align<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fas fa-comments<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span><span class="token entity named-entity" title="&nbsp;">&amp;nbsp;</span>&lt;%= __('contact') %&gt;                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>                &lt;%- page.content %&gt;            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!--其他评论card--&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>card<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            &lt;% if (theme.gitalk &amp;&amp; theme.gitalk.enable) { %&gt;                &lt;%- partial('_partial/gitalk') %&gt;            &lt;% } %&gt;            &lt;% if (theme.gitment.enable) { %&gt;                &lt;%- partial('_partial/gitment') %&gt;            &lt;% } %&gt;            &lt;% if (theme.disqus.enable) { %&gt;                &lt;%- partial('_partial/disqus') %&gt;            &lt;% } %&gt;            &lt;% if (theme.livere &amp;&amp; theme.livere.enable) { %&gt;                &lt;%- partial('_partial/livere') %&gt;            &lt;% } %&gt;            &lt;% if (theme.valine &amp;&amp; theme.valine.enable) { %&gt;            &lt;%- partial('_partial/valine') %&gt;            &lt;% } %&gt;            &lt;% if (theme.minivaline &amp;&amp; theme.minivaline.enable) { %&gt;                &lt;%- partial('_partial/minivaline') %&gt;            &lt;% } %&gt;            &lt;% if (theme.waline &amp;&amp; theme.waline.enable) { %&gt;                &lt;%- partial('_partial/waline') %&gt;            &lt;% } %&gt;            &lt;% if (theme.twikoo &amp;&amp; theme.twikoo.enable) { %&gt;                &lt;%- partial('_partial/twikoo') %&gt;            &lt;% } %&gt;            &lt;% if (theme.changyan &amp;&amp; theme.changyan.enable) { %&gt;                &lt;%- partial('_partial/changyan') %&gt;            &lt;% } %&gt;        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="本地编写代码"><a href="#本地编写代码" class="headerlink" title="本地编写代码"></a>本地编写代码</h3><p>服务器写代码对我来说是一件痛苦又无奈的事，想要本地写代码</p><p>参考 <a href="http://wzspace.cn/p/52120">本地连接服务器远程写代码</a></p><h3 id="搭建图床"><a href="#搭建图床" class="headerlink" title="搭建图床"></a>搭建图床</h3><p><del>推荐使用图床作为图片链接，减轻服务器压力</del></p><p><del>我现在使用的是 <a href="https://imgtu.com/">路过图床</a>，使用很简单，上传图片，然后复制链接即可</del></p><p><strong>我错了，这玩意老是删我图片，不讲武德</strong></p><p>推荐使用自己的域名创建一个子域名来单独保存数据，或者使用 <a href="https://github.com/">GitHub</a> 创建一个仓库保存，但是github有时候访问会比较困难</p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> Hexo </tag>
            
            <tag> matery </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
    <entry>
      <title>宝塔面板安装和基本配置</title>
      <link href="/article/52020/"/>
      <url>/article/52020/</url>
      
        <content type="html"><![CDATA[<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ol><li>本次仅针对CentOS-7.9版本的服务器</li><li>安装宝塔面板需要一个纯净的环境</li></ol><h2 id="安装宝塔面板"><a href="#安装宝塔面板" class="headerlink" title="安装宝塔面板"></a>安装宝塔面板</h2><p>安装就三个命令</p><h3 id="安装wget"><a href="#安装wget" class="headerlink" title="安装wget"></a>安装wget</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum install -y wget<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="下载脚本文件"><a href="#下载脚本文件" class="headerlink" title="下载脚本文件"></a>下载脚本文件</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wget -O install.sh http://download.bt.cn/install/install_6.0.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="执行脚本文件"><a href="#执行脚本文件" class="headerlink" title="执行脚本文件"></a>执行脚本文件</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sh install.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>出现安装确认时，输入y回车即可</p><p><img src="http://data.wzspace.cn/image/blog/52020/azqr.png" alt="安装确认"></p><p>安装完成如下</p><p><img src="http://data.wzspace.cn/image/blog/52020/azwc.png" alt="安装完成"></p><h2 id="配置安全组规则"><a href="#配置安全组规则" class="headerlink" title="配置安全组规则"></a>配置安全组规则</h2><p>进入阿里云服务器管理面板，打开安全组，手动添加8888端口号</p><p><img src="http://data.wzspace.cn/image/blog/52020/fwqaqz.png" alt="服务器安装组"></p><p><img src="http://data.wzspace.cn/image/blog/52020/tjrgz.png" alt="添加入规则"></p><h2 id="配置宝塔面板"><a href="#配置宝塔面板" class="headerlink" title="配置宝塔面板"></a>配置宝塔面板</h2><h3 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h3><p>复制宝塔安装完成时显示的外网面板地址在浏览器打开，输入username和password</p><p><img src="http://data.wzspace.cn/image/blog/52020/srzhmm.png" alt="输入账号密码"></p><h3 id="绑定账号"><a href="#绑定账号" class="headerlink" title="绑定账号"></a>绑定账号</h3><p>登录之后会有一个绑定宝塔账号，没有的话去 <a href="https://www.bt.cn/">官网</a> 注册一个</p><h3 id="安装套件"><a href="#安装套件" class="headerlink" title="安装套件"></a>安装套件</h3><p>进去之后会有一个推荐安装套件，我选择的是推荐中的推荐LNMP，极速安装和编译安装区别不大</p><p><img src="http://data.wzspace.cn/image/blog/52020/tjaztj.png" alt="推荐安装套件"></p><h3 id="面板设置"><a href="#面板设置" class="headerlink" title="面板设置"></a>面板设置</h3><p>打开面板设置，更改密码即可</p><p><img src="http://data.wzspace.cn/image/blog/52020/mbszzhmm.png" alt="面板设置账号密码"></p><h3 id="安全设置"><a href="#安全设置" class="headerlink" title="安全设置"></a>安全设置</h3><p>打开面板设置 -&gt; 安全设置</p><p><img src="http://data.wzspace.cn/image/blog/52020/mbaqsz.png" alt="面板安全设置"></p><p>更改面板端口，安全入口，未认证响应状态，绑定域名等，增加安全性，推荐设置如下</p><p>! <a href="http://data.wzspace.cn/image/blog/52020/mbaqsztjsz.png">面板安全设置推荐设置</a></p><p>注意：</p><ul><li>更改面板端口后前往服务器安全组配置对应的规则</li><li>绑定域名推荐为顶级域名，若出现无法访问的情况，更改文件 <em>/www/server/panel/data/domain.conf</em> 内的内容或者直接删除使用IP访问即可</li></ul><p>如有域名，推荐域名解析如下</p><p><img src="http://data.wzspace.cn/image/blog/52020/ymjxtj.png" alt="域名解析推荐"></p>]]></content>
      
      
      <categories>
          
          <category> CentOS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CentOS </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
  
    
    
    
  
  

  
</search>
